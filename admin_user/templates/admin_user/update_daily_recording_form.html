<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Curator Daily Recording Form</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <style>
        .form-control {
            margin-bottom: 10px;
        }

        .form-label {
            margin-bottom: 5px;
        }

        input,
        label,
        select,
        button,
        textarea {
            font-size: 70% !important;
        }

        label {
            font-weight: 700;
        }
    </style>

    <script>

        const getWeather = (textField) => {

            // Define your API key, location, and the date you want to get the forecast for
            const apiKey = 'f201a1e4b5cf4e87a66103535240211';
            const loc = 'Nagpur';
            const date = textField.value // Replace with your desired date (YYYY-MM-DD)

            // Construct the API URL for the forecast
            const url = `https://api.weatherapi.com/v1/forecast.json?key=${apiKey}&q=${loc}&dt=${date}&aqi=no`;

            // Fetch the weather data
            fetch(url)
                .then(response => response.json())
                .then(data => {
                    // Extract the forecast data for the day
                    const forecast = data.forecast.forecastday[0].day;

                    // Get the min, max temperature and weather condition description
                    const minTemp = forecast.mintemp_c;
                    const maxTemp = forecast.maxtemp_c;
                    const condition = forecast.condition.text;

                    document.getElementById("min_temp").value = minTemp
                    document.getElementById("max_temp").value = maxTemp
                    document.getElementById("forecast").value = condition

                })
                .catch(error => console.error('Error fetching weather data:', error));
        }



    </script>
</head>

<body>
    {% include "admin_user/menu.html" %}
    <div class="container mt-5">
        <ul class="list-group">
            <li class="list-group-item bg-info display-6 text-white pb-3">
              Update Daily Maintenance Form
            </li>
            <li class="list-group-item">
                <div class="row">
                    <div class="col-md-12">
                        <!--                <h3 class="mb-3">Daily Maintenance Form</h3>-->
                        <form method="post" onsubmit="return handleSubmit(this)">
                            {% csrf_token %}
                            <fieldset class="form-group border mt-4 p-3">
                                <!-- <legend class="w-auto px-2">Common Entries</legend> -->
                                 <input type="hidden" name="id" value="{{daily.0}}"/>
                                <div class="row">
                                    <div class="col-md-12">
                                        <label for="recording_type" class="form-label">Select Recording Type</label>
                                        <select id="recording_type" name="recording_type" class="form-control">
                                            <option value="daily">Daily</option>
                                            <!-- <option value="daily">daily Preperation</option>
                                    <option value="both">Both</option> -->
                                        </select>
                                    </div>
                                </div>


                                <div class="row">
                                    <div class="col-12">
                                        <label id="ground_id_label" class="bg-dark text-white" style="color:white;background-color: black;padding: 2px 10px;">Ground Id: {{daily.58}}</label>
                                        <input type="hidden" name="ground_id_text" id="ground_id_text"
                                            value="{{daily.58}}" />
                                        <br>
                                        <label for="ground_id" class="form-label">Select Ground:</label>
                                        <select id="ground_id" name="ground_id" class="form-control">


                                        </select>

                                    </div>
                                    <div class="col-12">
                                        <label id="pitch_id_label" class="bg-dark text-white" style="color:white;background-color: black;padding: 2px 10px;"></label>
                                        <input type="hidden" name="pitch_id_text" id="pitch_id_text"
                                            value="{{daily.1}}" />
                                        <br>
                                        <label for="pitch_id" class="form-label">Select Pitch:</label>
                                        <select id="pitch_id" name="pitch_id" class="form-control">
                                            <!--                                <option value="all">All Pitches</option>-->

                                            <!--                                {% for pitch in pitches %}-->
                                            <!--                                <option value="{{ pitch.0 }}">(Pitch No:{{ pitch.3 }}) (Pitch-Type:{{ pitch.4 }})  (Ground ID: {{pitch.2}})</option>-->
                                            <!--                                {% endfor %}-->
                                        </select>
                                    </div>

                                </div>

                                <div class="row">
                                    <div class="col-sm-12 col-lg-6">
                                        <label for="pitch_location" class="form-label">Pitch Location:</label>
                                        <input type="text" id="pitch_location" value="{{daily.2}}" name="pitch_location"
                                            class="form-control">
                                    </div>
                                        <div class="col-lg-6 col-sm-12 checkboxes">
                                        <div class="form-check d-flex">
                                            <input class="form-check-input p-2 me-2" type="checkbox" name="pitch-main" {% if daily.61 == "1" %}checked{% endif %} id="pitch-main">
                                            <label class="form-check-label" for="flexCheckDefault">
                                            Pitch Main
                                            </label>
                                          </div>
                                          <div class="form-check d-flex">
                                            <input class="form-check-input p-2 me-2" type="checkbox" name="pitch-practice" {% if daily.62 == "1" %}checked{% endif %} id="pitch-practice">
                                            <label class="form-check-label" for="flexCheckChecked">
                                              Pitch Practice
                                            </label>
                                          </div>
                                          <div class="form-check d-flex">
                                            <input class="form-check-input p-2 me-2" type="checkbox" name="outfield" {% if daily.63 == "1" %}checked{% endif %} id="outfield">
                                            <label class="form-check-label" for="flexCheckChecked">
                                              Outfield
                                            </label>
                                          </div>
                                          <div class="form-check d-flex">
                                            <input class="form-check-input p-2 me-2" type="checkbox" name="practice-area" {% if daily.64 == "1" %}checked{% endif %} id="practice-area">
                                            <label class="form-check-label" for="flexCheckChecked">
                                              Practice Area
                                            </label>
                                          </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <label for="rolling_start_date" class="form-label">Date:</label>
                                        <input type="date" onchange="getWeather(this)" id="rolling_start_date"
                                            name="rolling_start_date" value="{{daily.3}}" class="form-control">
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="row">
                                            <div class="col">
                                                <label for="min_temp" class="form-label">Minimum Temprature °C</label>
                                                <input type="text" id="min_temp" placeholder="Minimum Temprature"
                                                    value="{{daily.4}}" name="min_temp" class="form-control">

                                            </div>
                                            <div class="col">
                                                <label for="max_temp" class="form-label">Maximum Temprature °C</label>
                                                <input type="text" placeholder="Maximum Temprature" id="max_temp"
                                                    name="max_temp" value="{{daily.5}}" class="form-control">

                                            </div>
                                        </div>

                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <label for="forecast" class="form-label">Forecast Prediction Available:</label>
                                        <textarea id="forecast" name="forecast"
                                            placeholder="Forecast Prediction Available"
                                            class="form-control">{{daily.6}}</textarea>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="row">
                                            <div class="col">
                                                <label for="moisture" class="form-label">Moisture</label>
                                                <input type="text" id="moisture" placeholder="Moisture"
                                                    value="{{daily.8}}" name="moisture" class="form-control">

                                            </div>
                                            <div class="col">
                                                <label for="clagg_hammer" class="form-label">Clagg Hammer</label>
                                                <input type="text" placeholder="Clagg Hammer" id="clagg_hammer"
                                                    value="{{daily.7}}" name="clagg_hammer" class="form-control">

                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </fieldset>
                            <!--     curator name come from curator login..               -->
                            <hr>

                            <ul class="nav nav-tabs" id="myTab" role="tablist">
                                <li class="nav-item fs-4" role="presentation">
                                    <button class="nav-link active" id="main-tab" data-bs-toggle="tab"
                                        data-bs-target="#main-tab-pane" type="button" role="tab"
                                        aria-controls="main-tab-pane" aria-selected="true">
                                        <u><b>Main Pitch Entry</b></u>
                                    </button>
                                </li>
                                <li class="nav-item fs-4" role="presentation">
                                    <button class="nav-link" id="pp-tab" data-bs-toggle="tab"
                                        data-bs-target="#pp-tab-pane" type="button" role="tab"
                                        aria-controls="pp-tab-pane" aria-selected="true">
                                        <u><b>Practice Pitch Entry</b></u>
                                    </button>
                                </li>
                                <li class="nav-item fs-4" role="presentation">
                                    <button class="nav-link" id="outfield-tab" data-bs-toggle="tab"
                                        data-bs-target="#outfield-tab-pane" type="button" role="tab"
                                        aria-controls="outfield-tab-pane" aria-selected="false">
                                        <u><b>Outfield Entry</b></u>
                                    </button>
                                </li>
                                <li class="nav-item fs-4" role="presentation">
                                    <button class="nav-link" id="practice-tab" data-bs-toggle="tab"
                                        data-bs-target="#practice-tab-pane" type="button" role="tab"
                                        aria-controls="practice-tab-pane" aria-selected="false">
                                        <u><b>Practice Area Entry</b></u>
                                    </button>
                                </li>

                            </ul>

                            <div class="tab-content" id="myTabContent">
                                <div class="tab-pane fade show active" id="main-tab-pane" role="tabpanel"
                                    aria-labelledby="main-tab" tabindex="0">
                                     <div class="form-group border mt-4 text-dark p-3" style="background-color: #e0fbfc;">
                                        <legend class="w-auto px-2">Main Pitch Entries</legend>




                                        <div class="row">
                                            <div class="col-sm-12 col-lg-6">
                                                <fieldset class="form-group border mt-4 text-dark p-3" style="background-color:#98c1d9">
                                                    <legend class="w-auto px-2">Watering</legend>
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <label for="last_watering_on" class="form-label">Watering
                                                                On:</label>
                                                            <input type="date" id="last_watering_on"
                                                                name="last_watering_on" value="{{daily.12}}"
                                                                class="form-control">
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-12">

                                                            <label for="time_of_application" class="form-label">Time of
                                                                Watering:</label>
                                                               <div class="d-flex align-items-center justify-content-center">
    <input type="time" id="time_of_application" name="time_of_application" value="{{daily.14}}" class="form-control">
    <button type="button" class="btn d-flex align-items-center justify-content-center p-0 time-reset" id="button-addon2" style="width: 38px;">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-clockwise" viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2z"/>
            <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466"/>
        </svg>
    </button>
</div>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <label for="quantity_of_water" class="form-label">Quantity
                                                                of
                                                                Water:</label>
                                                            <input type="text" id="quantity_of_water"
                                                                name="quantity_of_water" value="{{daily.13}}"
                                                                class="form-control">
                                                        </div>
                                                    </div>
                                                </fieldset>

                                            </div>
                                            <div class="col-sm-12 col-lg-6">
                                                  <fieldset class="form-group border mt-4 text-dark p-3" style="background-color:#98c1d9">
                                                    <legend class="w-auto px-2">Rolling</legend>
                                                       <div>
                                                        <label for="roller_machine_type" class="form-label">Select Machine Type</label>
                                                         <select class="form-select" id="roller_machine_type"
                                                                name="roller_machine_type">
                                                                <option selected>Select Type</option>
                                                                <option value="passes">Maunal</option>
                                                                <option value="time">Machenized</option>
                                                            </select>
                                                            </div>
                                                    <div class="row">
                                                        <div class="col-lg-6 col-sm-12">
                                                            <label id="machinery_id_label"></label>
                                                            <br>
                                                            <label for="machinery_id" class="form-label">Select
                                                                Roller</label>
                                                            <input type="hidden" value="{{daily.9}}"
                                                                name="machinery_id" id="machinery_id">
                                                            <input type="text" name="machinery_name" id="machinery_name"
                                                                class="form-control" readonly
                                                                placeholder="Click to select machinery">
                                                        </div>
                                                        <div class="col-lg-3 col-sm-12 d-flex">
                                                            <button type="button"
                                                                class="btn btn-dark mt-2 align-self-end"
                                                                style="font-size:70%"
                                                                onclick="openMachineryModal('roller')">Select
                                                                Machinery</button>

                                                        </div>
                                                           <label for="roller_machinery_name_operator"
                                                                    class="form-label">Operator Name:</label>
                                                             <input type="text" name="roller_machinery_name_operator"
                                                                    id="roller_machinery_name_operator" class="form-control">


                                                    </div>
                                                    <div class="col-md-12">
                                                        <label for="time_of_application" class="form-label">Time of
                                                            Rolling:</label>

                                                             <div class="d-flex align-items-center justify-content-center">
   <input type="time" id="time_of_application_roller" name="time_roller"
                                                            value="{{daily.14}}" class="form-control">
    <button type="button" class="btn d-flex align-items-center justify-content-center p-0 time-reset" id="button-addon2" style="width: 38px;">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-clockwise" viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2z"/>
            <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466"/>
        </svg>
    </button>
</div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <label for="rolling_speed" class="form-label">Rolling
                                                                Speed (km/hour):</label>
                                                            <input type="text"  id="rolling_speed"
                                                                name="rolling_speed" value="{{daily.11}}" class="form-control">
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                          <div class="col-md-6">
                                                            <label for="passes-unit" class="form-label">Select
                                                                Unit:</label>
                                                            <select class="form-select" id="passes_unit"
                                                                name="passes_unit">
                                                                <option selected>Select Unit</option>
                                                                <option value="passes">Passes</option>
                                                                <option value="time">Time</option>
                                                                <option value="hours">Hours</option>
                                                                <option value="minutes">Minutes</option>
                                                            </select>
                                                            </div>
                                                        <div class="col-md-6">
                                                            <label for="no_of_passes" class="form-label">Number of
                                                                Passes:</label>
                                                            <input type="number"  id="no_of_passes"
                                                                name="no_of_passes" value="{{daily.10}}" class="form-control">
                                                        </div>
                                                    </div>
                                                </fieldset>
                                            </div>
                                               <div class="col-sm-12 col-lg-6">
        <h5 class="mt-4">Rolling Entries</h5>
        <table class="table table-bordered" id="rollingTable">
            <thead class="table-dark">
                <tr>
                    <th>Machine Type</th>
                    <th>Machinery</th>
                    <th>Operator</th>
                    <th>Speed</th>
                    <th>Passes</th>
                    <th>Unit</th>
                    <th>Time</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>

        <input type="hidden" name="rolling_entries_json" id="rolling_entries_json">
    </div>
                                        </div>






                                        <div class="row mt-4">
                                            <div class="col-lg-6 col-sm-12">
                                                 <div>
                                                        <label for="mover_machine_type" class="form-label">Select Machine Type</label>
                                                         <select class="form-select" id="mover_machine_type"
                                                                name="mover_machine_type">
                                                                <option selected>Select Type</option>
                                                                <option value="passes">Maunal</option>
                                                                <option value="time">Machenized</option>
                                                            </select>
                                                            </div>
                                                <label id="mover_machinery_id_label"></label>
                                                <br>
                                                <label for="mover_machinery_id" class="form-label">Select
                                                    Machinery/Mover</label>
                                                <input type="hidden" value="{{daily.16}}" name="mover_machinery_id"
                                                    id="mover_machinery_id">
                                                <input type="text" name="mover_machinery_name" id="mover_machinery_name"
                                                    class="form-control" readonly placeholder="Click to select machinery">
                                            </div>
                                            <div class="col-lg-3 col-sm-12 d-flex">
                                                <button type="button" class="btn btn-dark mt-2 align-self-end"
                                                    style="font-size:70%" onclick="openMachineryModal('mover')">Select
                                                    Machinery</button>

                                            </div>
        <label for="mover_machinery_name_operator"
                                                                    class="form-label">Operator Name:</label>
                                                             <input type="text" name="mover_machinery_name_operator"
                                                                    id="mover_machinery_name_operator" class="form-control">

                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <label for="date_mowing_done_last" class="form-label">Last Mowing Date:</label>
                                                <input type="date" id="date_mowing_done_last" value="{{daily.17}}"
                                                    name="date_mowing_done_last" class="form-control">
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <label for="time_of_application_mover" class="form-label">Time of
                                                    Application Mover:</label>

                                                        <div class="d-flex align-items-center justify-content-center">
   <input type="time" id="time_of_application_mover" value="{{daily.18}}"
                                                    name="time_of_application_mover" class="form-control">
    <button type="button" class="btn d-flex align-items-center justify-content-center p-0 time-reset" id="button-addon2" style="width: 38px;">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-clockwise" viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2z"/>
            <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466"/>
        </svg>
    </button>
</div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <label for="mowing_done_at_mm" class="form-label">Mowing Height
                                                    (mm):</label>
                                                <input type="number" id="mowing_done_at_mm" value="{{daily.19}}"
                                                    name="mowing_done_at_mm" class="form-control">
                                            </div>
                                        </div>
                                          <div class="row">
                                                             <div class="col-md-6">
                                                            <label for="moving_passes_unit" class="form-label">Select
                                                                Unit:</label>
                                                            <select class="form-select" id="moving_passes_unit" name="moving_passes_unit">
                                                                <option selected>Select Unit</option>
                                                                <option value="time">Time</option>
                                                                <option value="hours">Hours</option>
                                                                <option value="minutes">Minutes</option>
                                                            </select>
                                                            </div>
                                                            <div class="col-md-6">
                                                                <label for="mowing_duration" class="form-label">Mowing Duration :</label>
                                                                <input type="number" id="mowing_duration"
                                                                    name="mowing_duration" class="form-control">
                                                            </div>

                                                             <div class="col-sm-12 col-lg-6">
        <h5 class="mt-4">Mover Entries</h5>
        <table class="table table-bordered" id="moverTable">
            <thead class="table-dark">
                <tr>
                    <th>Machine Type</th>
                    <th>Machinery</th>
                    <th>Operator</th>
                    <th>Height (mm)</th>
                    <th>Duration</th>
                    <th>Unit</th>
                    <th>Time</th>
                    <th>Date</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>

        <input type="hidden" name="mover_entries_json" id="mover_entries_json">
    </div>
                                                        </div>
                                                        
                                        <div class="row mt-3">
                                            <div class="col-sm-12 col-lg-6">
                                                <div class="input-group mb-3 border rounded">
                                                    <div class="input-group-text bg-light border-0"
                                                        style="background-color:white !important;">
                                                        <input class="form-check-input mt-0 border-left" type="checkbox"
                                                            aria-label="Checkbox for following text input" {% if daily.20 == "1" %}checked{% endif %} name="is_fertilizers_used"
                                                            id="is_fertilizers_used">
                                                    </div>
                                                    <input type="text" class="form-control border-0 mt-2"
                                                        value="Is Fertilizers Used" style="background-color:white" readonly
                                                        aria-label="Text input with checkbox">
                                                </div>
                                            </div>
                                            <div class="col-sm-12 col-lg-6">
                                                <div class="row">
                                                    <div class="col-sm-12 col-lg-6">
                                                        <label for="time_of_application_chemical" class="form-label">Time of
                                                            Application Chemical:</label>
                                                    </div>
                                                    <div class="col-sm-12 col-lg-6">

                                                      <div class="d-flex align-items-center justify-content-center">
    <input type="time" id="time_of_application_chemical"
                                                    name="time_of_application_chemical" class="form-control" value="{{daily.54}}">
    <button type="button" class="btn d-flex align-items-center justify-content-center p-0 time-reset" id="button-addon2" style="width: 38px;">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-clockwise" viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2z"/>
            <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466"/>
        </svg>
    </button>
</div>
                                                    </div>
                                                </div>


                                            </div>

                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <label for="fertilizers_details" class="form-label">Chemical
                                                    Details:</label>
                                                <div class="row">
                                                    <div class="col">
                                                        <select id="fertilizers_details" name="fertilizers_details"
                                                            class="form-control">
                                                            <option value="">Select Any Chemical</option>

                                                        </select>
                                                    </div>
                                                    <div class="col">
                                                        <input type="text" id="chemical_weight"
                                                            placeholder="Weight" name="chemical_weight"
                                                            class="form-control" value="{{daily.81}}">
                                                    </div>
                                                    <div class="col">
                                                        <select id="fertilizers_unit"
                                                            name="fertilizers_unit"
                                                            class="form-control">
                                                            <option value="">Select Any Unit abca</option>
                                                            <option value="kg">KG</option>
                                                            <option value="gm">GM</option>
                                                            <option value="ltr">Liters</option>
                                                            <option value="ml">Milli Liters</option>
                                                            <option value="NA">NA</option>
                                                        </select>
                                                    </div>
                                                    <div class="col">
                                                        <input type="text" id="chemical_details_remark" placeholder="Remarks"
                                                            name="chemical_details_remark" class="form-control"
                                                            value="{{daily.22}}">
                                                    </div>
                                                </div>
                                                  <!-- Add Button -->
                                                        <div class="text-end">
                                                            <button type="button" class="btn btn-sm btn-primary"
                                                                id="addChemicalBtn">+ Add Chemical Entry</button>
                                                        </div>

                                                        <!-- Table of Added Rows -->
                                                        <table class="table table-bordered mt-3" id="chemicalTable">
                                                            <thead class="table-dark">
                                                                <tr>
                                                                    <th>Used</th>
                                                                    <th>Time</th>
                                                                    <th>Chemical</th>
                                                                    <th>Weight</th>
                                                                    <th>Unit</th>
                                                                    <th>Remark</th>
                                                                    <th>Action</th>
                                                                </tr>
                                                            </thead>
                                                            <tbody></tbody>
                                                        </table>
<input type="hidden" name="chemical_entries" id="chemical_entries">
                                            </div>
                                        </div>

                                                    <script>
                                                        document.getElementById("addChemicalBtn").addEventListener("click", function () {
                                                            const used = document.getElementById("is_fertilizers_used").checked ? "Yes" : "No";
                                                            const time = document.getElementById("time_of_application_chemical").value;
                                                            const chemical = document.getElementById("fertilizers_details").selectedOptions[0].text;
                                                            const weight = document.getElementById("chemical_weight").value;
                                                            const unit = document.getElementById("fertilizers_unit").value;
                                                            const remark = document.getElementById("chemical_details_remark").value;

                                                            // if (!chemical || !time) {
                                                            //   alert("Please fill required fields: Chemical and Time.");
                                                            //   return;
                                                            // }

                                                            const tableBody = document.querySelector("#chemicalTable tbody");
                                                            const row = document.createElement("tr");

                                                            row.innerHTML = `<td>${used}</td>
                                                                                <td>${time}</td>
                                                                                <td>${chemical}</td>
                                                                                <td>${weight}</td>
                                                                                <td>${unit}</td>
                                                                                <td>${remark}</td>
                                                                                <td><button type="button" class="btn btn-sm btn-danger delete-row">X</button></td>`;

                                                                                tableBody.appendChild(row);

                                                          

                                                            updateChemicalData();
                                                        });

                                                        document.querySelector("#chemicalTable").addEventListener("click", function (e) {
                                                            if (e.target.classList.contains("delete-row")) {
                                                                e.target.closest("tr").remove();
                                                                updateChemicalData();
                                                            }
                                                        });

                                                        function updateChemicalData() {
                                                            const rows = document.querySelectorAll("#chemicalTable tbody tr");
                                                            const data = Array.from(rows).map(row => {
                                                                const cells = row.querySelectorAll("td");
                                                                return {
                                                                    is_fertilizers_used: cells[0].innerText,
                                                                    time_of_application_chemical: cells[1].innerText,
                                                                    fertilizers_details: cells[2].innerText,
                                                                    chemical_weight: cells[3].innerText,
                                                                    chemical_unit: cells[4].innerText,
                                                                    chemical_details_remark: cells[5].innerText
                                                                };
                                                            });
                                                            document.getElementById("chemical_entries").value = JSON.stringify(data);
                                                        }

                                                        // Final form submit validation (optional)
                                                        function handleSubmit(form) {
                                                            const hiddenField = document.getElementById("chemical_entries").value;
                                                            if (!hiddenField || hiddenField === "[]") {
                                                                alert("Please add at least one chemical entry.");
                                                                return false;
                                                            }
                                                            return true;
                                                        }


                                                     function getSplit(val) {
    return val.split("__####__").filter(e => e.trim() !== "");
}

async function fertilizerNameById(id) {
    try {
        console.log(id)
        const response = await fetch("/usr_admin/get_chemical/" + id);

        if (!response.ok) {
            throw new Error("Fertilizer not found");
        }

        const data = await response.json();
        return data.name + " (" + data.type + ")";
    } catch (e) {
        console.error("Error fetching fertilizer ID", id, ":", e);
        return "Unknown Fertilizer";
    }
}




function convertYesNo(list) {
    return list.map(item => item.trim() === "1" ? "Yes" : "No");
}

document.addEventListener("DOMContentLoaded",async function () {
    const timeList = getSplit("{{ daily.81|default:'' }}");
   
    const weightList = getSplit("{{ daily.82|default:'' }}");
    const unitList = getSplit("{{ daily.86|default:'' }}");
    const remarkList = getSplit("{{ daily.52|default:'' }}");
    const usedListRaw = getSplit("{{ daily.50|default:'' }}");
    const usedList = convertYesNo(usedListRaw);
// ✅ Example usage with array of IDs:

const chemicalList=getSplit("{{ daily.51|default:'' }}");
const fertilizerPromises = chemicalList.map(id => fertilizerNameById(id));
const fertilizerNames = await Promise.all(fertilizerPromises);

console.log(fertilizerNames);
// Output: ["Urea (Nitrogen)", "DAP (Phosphorus)", "NPK (Mixed)"]
    const tableBody = document.querySelector("#chemicalTable tbody");
    tableBody.innerHTML = "";

    const maxLength = Math.max(
        timeList.length,
        fertilizerNames.length,
        weightList.length,
        unitList.length,
        remarkList.length,
        usedList.length
    );

    for (let i = 0; i < maxLength; i++) {
        const row = document.createElement("tr");
        row.innerHTML = `
            <td>${usedList[i] || ""}</td>
            <td>${timeList[i] || ""}</td>
            <td>${fertilizerNames[i] || ""}</td>
            <td>${weightList[i] || ""}</td>
            <td>${unitList[i] || ""}</td>
            <td>${remarkList[i] || ""}</td>
            <td><button type="button" class="btn btn-sm btn-danger delete-row">X</button></td>
        `;
        tableBody.appendChild(row);
    }

    updateChemicalData();
});

                                                    </script>

                                        <div class="row">
                                            <div class="col-md-12">
                                                <label for="remark_by_groundsman" class="form-label">Remark by
                                                    Groundsman:</label>
                                                <textarea id="remark_by_groundsman" placeholder="Remarks"
                                                    name="remark_by_groundsman" class="form-control">{{daily.23}}</textarea>
                                            </div>
                                        </div>
                                          <div class="form-check checkbox-pitch">
                                            <input class="form-check-input custom-checkbox" type="checkbox" id="checkPitchMain" name="checkPitchMain">
                                            <label class="form-check-label">Is Main Pitch Form Complete ?</label>
                                        </div>

                                    </div>
                                    <hr>
                                </div>

                                <div class="tab-pane fade show active" id="pp-tab-pane" role="tabpanel"
                                    aria-labelledby="main-tab" tabindex="0">
                                     <div class="form-group border mt-4 text-dark p-3" style="background-color: #e0fbfc;">
                                        <legend class="w-auto px-2">Practice Pitch Entries</legend>




                                        <div class="row">
                                            <div class="col-sm-12 col-lg-6">
                                                <fieldset class="form-group border mt-4 text-dark p-3" style="background-color:#98c1d9">
                                                    <legend class="w-auto px-2">Watering</legend>
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <label for="pp_last_watering_on" class="form-label">Watering
                                                                On:</label>
                                                            <input type="date" id="pp_last_watering_on"
                                                                name="pp_last_watering_on" value="{{daily.68}}"
                                                                class="form-control">
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <label for="pp_time_of_application" class="form-label">Time of
                                                                Watering:</label>

                                                                <div class="d-flex align-items-center justify-content-center">
    <input type="time" id="pp_time_of_application" name="pp_time_of_application" value="{{daily.70}}" class="form-control">
    <button type="button" class="btn d-flex align-items-center justify-content-center p-0 time-reset" id="button-addon2" style="width: 38px;">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-clockwise" viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2z"/>
            <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466"/>
        </svg>
    </button>
</div>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <label for="pp_quantity_of_water" class="form-label">Quantity
                                                                of
                                                                Water:</label>
                                                            <input type="text" id="pp_quantity_of_water"
                                                                name="pp_quantity_of_water" value="{{daily.69}}"
                                                                class="form-control">
                                                        </div>
                                                    </div>
                                                </fieldset>

                                            </div>
                                            <div class="col-sm-12 col-lg-6">
                                                  <fieldset class="form-group border mt-4 text-dark p-3" style="background-color:#98c1d9">
                                                    <legend class="w-auto px-2">Rolling</legend>
                                                    <div>
                                                        <label for="pp_roller_machine_type" class="form-label">Select Machine Type</label>
                                                         <select class="form-select" id="pp_roller_machine_type"
                                                                name="pp_roller_machine_type">
                                                                <option selected>Select Type</option>
                                                                <option value="passes">Maunal</option>
                                                                <option value="time">Machenized</option>
                                                            </select>
                                                            </div>
                                                    <div class="row">
                                                        <div class="col-lg-6 col-sm-12">
                                                            <label id="pp_machinery_id_label"></label>
                                                            <br>
                                                            <label for="pp_machinery_id" class="form-label">Select
                                                                Roller</label>
                                                            <input type="hidden" value="{{daily.65}}"
                                                                name="pp_machinery_id" id="pp_machinery_id">
                                                            <input type="text" name="machinery_name" id="pp_machinery_name"
                                                                class="form-control" readonly
                                                                placeholder="Click to select machinery">
                                                        </div>
                                                        <div class="col-lg-3 col-sm-12 d-flex">
                                                            <button type="button"
                                                                class="btn btn-dark mt-2 align-self-end"
                                                                style="font-size:70%"
                                                                onclick="openMachineryModal('pp_roller')">Select
                                                                Machinery</button>

                                                        </div>

                                                        <label for="pp_roller_machinery_name_operator" class="form-label">Operator Name:</label>
                                                             <input type="text" name="pp_roller_machinery_name_operator"
                                                                    id="pp_roller_machinery_name_operator" class="form-control">

                                                    </div>
                                                    <div class="col-md-12">
                                                        <label for="pp_time_of_application" class="form-label">Time of
                                                            Rolling:</label>

                                                             <div class="d-flex align-items-center justify-content-center">
    <input type="time" id="pp_time_of_application_roller" name="pp_time_roller" value="{{daily.71}}" class="form-control">
    <button type="button" class="btn d-flex align-items-center justify-content-center p-0 time-reset" id="button-addon2" style="width: 38px;">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-clockwise" viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2z"/>
            <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466"/>
        </svg>
    </button>
</div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <label for="pp_rolling_speed" class="form-label">Rolling
                                                                Speed (km/hour):</label>
                                                            <input type="text"  id="pp_rolling_speed"
                                                                name="pp_rolling_speed" value="{{daily.67}}" class="form-control">
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                            <div class="col-md-6">
                                                           <label for="pp_passes-unit" class="form-label">Select
                                                               Unit:</label>
                                                           <select class="form-select" id="pp_passes_unit"
                                                               name="pp_passes_unit">
                                                               <option selected>Select Unit</option>
                                                               <option value="passes">Passes</option>
                                                               <option value="time">Time</option>
                                                               <option value="hours">Hours</option>
                                                               <option value="minutes">Minutes</option>
                                                           </select>
                                                           </div>
                                                        <div class="col-md-6">
                                                            <label for="pp_no_of_passes" class="form-label">Number of
                                                                Passes:</label>
                                                            <input type="number"  id="pp_no_of_passes"
                                                                name="pp_no_of_passes" value="{{daily.66}}" class="form-control">
                                                        </div>
                                                    </div>
                                                      <div class="mt-3 text-end">
                <button type="button" class="btn btn-primary" onclick="ppaddRollingEntry()">Add Rolling Entry</button>
            </div>
                                                </fieldset>

                                            </div>
                                            <div class="col-sm-12 col-lg-4">
        <h5 class="mt-4">Rolling Entries</h5>
        <table class="table table-bordered" id="pprollingTable" style="font-size: 70%;">
            <thead class="table-dark">
                <tr>
                    <th>Machine Type</th>
                    <th>Machinery</th>
                    <th>Operator</th>
                    <th>Speed</th>
                    <th>Passes</th>
                    <th>Unit</th>
                    <th>Time</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>

        <input type="hidden" name="pp_rolling_entries_json" id="pp_rolling_entries_json">
                                            </div>
                                        </div>






                                        <div class="row mt-4">
                                            <div class="col-lg-6 col-sm-12">
                                                     <div>
                                                        <label for="pp_mover_machine_type" class="form-label">Select Machine Type</label>
                                                         <select class="form-select" id="pp_mover_machine_type"
                                                                name="pp_mover_machine_type">
                                                                <option selected>Select Type</option>
                                                                <option value="passes">Maunal</option>
                                                                <option value="time">Machenized</option>
                                                            </select>
                                                            </div>
                                                <label id="pp_mover_machinery_id_label"></label>
                                                <br>
                                                <label for="pp_mover_machinery_id" class="form-label">Select
                                                    Machinery/Mover</label>
                                                <input type="hidden" value="{{daily.72}}" name="pp_mover_machinery_id"
                                                    id="pp_mover_machinery_id">
                                                <input type="text" name="pp_mover_machinery_name" id="pp_mover_machinery_name"
                                                    class="form-control" readonly placeholder="Click to select machinery">
                                            </div>
                                            <div class="col-lg-3 col-sm-12 d-flex">
                                                <button type="button" class="btn btn-dark mt-2 align-self-end"
                                                    style="font-size:70%" onclick="openMachineryModal('pp_mover')">Select
                                                    Machinery</button>

                                            </div>

        <label for="pp_mover_machinery_name_operator"
                                                                    class="form-label">Operator Name:</label>
                                                             <input type="text" name="pp_mover_machinery_name_operator"
                                                                    id="pp_mover_machinery_name_operator" class="form-control">

                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <label for="pp_date_mowing_done_last" class="form-label">Last Mowing Date:</label>
                                                <input type="date" id="pp_date_mowing_done_last" value="{{daily.73}}"
                                                    name="pp_date_mowing_done_last" class="form-control">
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <label for="pp_time_of_application_mover" class="form-label">Time of
                                                    Application Mover:</label>

                                                     <div class="d-flex align-items-center justify-content-center">
   <input type="time" id="pp_time_of_application_mover" value="{{daily.74}}" name="pp_time_of_application_mover" class="form-control">
    <button type="button" class="btn d-flex align-items-center justify-content-center p-0 time-reset" id="button-addon2" style="width: 38px;">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-clockwise" viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2z"/>
            <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466"/>
        </svg>
    </button>
</div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <label for="pp_mowing_done_at_mm" class="form-label">Mowing Height
                                                    (mm):</label>
                                                <input type="number" id="pp_mowing_done_at_mm" value="{{daily.75}}"
                                                    name="pp_mowing_done_at_mm" class="form-control">
                                            </div>
                                        </div>
                                         <div class="row">
                                                             <div class="col-md-6">
                                                            <label for="pp_moving_passes_unit" class="form-label">Select
                                                                Unit:</label>
                                                            <select class="form-select" id="pp_moving_passes_unit" name="pp_moving_passes_unit">
                                                                <option selected>Select Unit</option>
                                                                <option value="time">Time</option>
                                                                <option value="hours">Hours</option>
                                                                <option value="minutes">Minutes</option>
                                                            </select>
                                                            </div>
                                                            <div class="col-md-6">
                                                                <label for="pp_mowing_duration" class="form-label">Mowing Duration :</label>
                                                                <input type="number" id="pp_mowing_duration"
                                                                    name="pp_mowing_duration" class="form-control">
                                                            </div>

                                                        </div>
                                                         <div class="mt-3 text-end">
                <button type="button" class="btn btn-primary" onclick="ppaddMoverEntry()">Add Mover Entry</button>
            </div>
             <div class="col-sm-12 col-lg-6">
        <h5 class="mt-4">Mover Entries</h5>
        <table class="table table-bordered" id="ppmoverTable" style="font-size: 70%;">
            <thead class="table-dark">
                <tr>
                    <th>Machine Type</th>
                    <th>Machinery</th>
                    <th>Operator</th>
                    <th>Height (mm)</th>
                    <th>Duration</th>
                    <th>Unit</th>
                    <th>Time</th>
                    <th>Date</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>

        <input type="hidden" name="pp_mover_entries_json" id="pp_mover_entries_json">
    </div>
                                        <div class="row mt-3">
                                            <div class="col-sm-12 col-lg-6">
                                                <div class="input-group mb-3 border rounded">
                                                    <div class="input-group-text bg-light border-0"
                                                        style="background-color:white !important;">
                                                        <input class="form-check-input mt-0 border-left" type="checkbox"
                                                            aria-label="Checkbox for following text input" {% if daily.76 == "1" %}checked{% endif %} name="pp_is_fertilizers_used"
                                                            id="pp_is_fertilizers_used">
                                                    </div>
                                                    <input type="text" class="form-control border-0 mt-2"
                                                        value="Is Fertilizers Used" style="background-color:white" readonly
                                                        aria-label="Text input with checkbox">
                                                </div>
                                            </div>
                                            <div class="col-sm-12 col-lg-6">
                                                <div class="row">
                                                    <div class="col-sm-12 col-lg-6">
                                                        <label for="pp_time_of_application_chemical" class="form-label">Time of
                                                            Application Chemical:</label>
                                                    </div>
                                                    <div class="col-sm-12 col-lg-6">

                                                     <div class="d-flex align-items-center justify-content-center">
   <input type="time" id="pp_time_of_application_chemical" name="pp_time_of_application_chemical" class="form-control" value="{{daily.80}}">
    <button type="button" class="btn d-flex align-items-center justify-content-center p-0 time-reset" id="button-addon2" style="width: 38px;">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-clockwise" viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2z"/>
            <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466"/>
        </svg>
    </button>
</div>
                                                    </div>
                                                </div>


                                            </div>

                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <label for="pp_fertilizers_details" class="form-label">Chemical
                                                    Details:</label>
                                                <div class="row">
                                                    <div class="col">
                                                        <select id="pp_fertilizers_details" name="pp_fertilizers_details"
                                                            class="form-control">
                                                            <option value="">Select Any Chemical</option>

                                                        </select>
                                                    </div>

                                                    <div class="col">
                                                        <input type="text" id="pp_chemical_weight" placeholder="Weight"
                                                            name="pp_chemical_weight" class="form-control" value="{{daily.82}}">
                                                    </div>
                                                    <div class="col">
                                                        <select id="pp_fertilizers_unit" name="pp_fertilizers_unit"
                                                            class="form-control">
                                                            <option value="">Select Any Unit</option>
                                                            <option value="kg">KG</option>
                                                            <option value="gm">GM</option>
                                                            <option value="ltr">Liters</option>
                                                            <option value="ml">Milli Liters</option>
                                                            <option value="NA">NA</option>
                                                        </select>
                                                    </div>
                                                    <div class="col">
                                                        <input type="text" id="pp_chemical_details_remark" placeholder="Remarks"
                                                            name="pp_chemical_details_remark" class="form-control"
                                                            value="{{daily.78}}">
                                                    </div>
                                                </div>
 <div class="text-end">
                                            <button type="button" class="btn btn-sm btn-primary" id="ppaddChemicalBtn">+
                                                Add Chemical Entry</button>
                                        </div>

                                         <div class="col-lg-6 col-sm-12">
          <!-- Table of Added Rows -->
                                        <table class="table table-bordered mt-3" style="font-size: 70%;" id="ppchemicalTable">
                                            <thead class="table-dark">
                                                <tr>
                                                    <th>Used</th>
                                                    <th>Time</th>
                                                    <th>Chemical</th>
                                                    <th>Weight</th>
                                                    <th>Unit</th>
                                                    <th>Remark</th>
                                                    <th>Action</th>
                                                </tr>
                                            </thead>
                                            <tbody></tbody>
                                        </table>
    </div>
                                            </div>
                                             <input type="hidden" name="pp_chemical_entries"
                                                    id="pp_chemical_entries">
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <label for="pp_remark_by_groundsman" class="form-label">Remark by
                                                    Groundsman:</label>
                                                <textarea id="pp_remark_by_groundsman" placeholder="Remarks"
                                                    name="pp_remark_by_groundsman" class="form-control">{{daily.79}}</textarea>
                                            </div>
                                        </div>
                                         <div class="form-check checkbox-pitch">
                                            <input class="form-check-input custom-checkbox" type="checkbox" id="checkPitchPractice" name="checkPitchPractice">
                                            <label class="form-check-label">Is Practice Pitch Form Complete ?</label>
                                        </div>

                                    </div>
                                    <hr>
                                </div>

                                <div class="tab-pane fade" id="outfield-tab-pane" role="tabpanel" aria-labelledby="outfield-tab"
                                    tabindex="0">
                                     <div class="form-group border mt-4 text-dark p-3" style="background-color:#7dcfb6">
                                        <legend class="w-auto px-2">Outfield Entries</legend>




                                        <div class="row">
                                            <div class="col-sm-12 col-lg-6">
                                                 <fieldset class="form-group border mt-4 text-white p-3" style="background-color:#1d4e89">
                                                    <legend class="w-auto px-2">Watering</legend>
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <label for="out_last_watering_on" class="form-label">Watering
                                                                On:</label>
                                                            <input type="date" id="out_last_watering_on" value="{{daily.27}}"
                                                                name="out_last_watering_on" class="form-control">
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <label for="out_time_of_application" class="form-label">Time
                                                                of
                                                                Watering:</label>

                                                                 <div class="d-flex align-items-center justify-content-center">
   <input type="time" id="out_time_of_application" value="{{daily.29}}" name="out_time_of_application" class="form-control">
    <button type="button" class="btn d-flex align-items-center justify-content-center p-0 time-reset" id="button-addon2" style="width: 38px;">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-clockwise" viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2z"/>
            <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466"/>
        </svg>
    </button>
</div>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <label for="out_quantity_of_water" class="form-label">Quantity of
                                                                Water:</label>
                                                            <input type="text" id="out_quantity_of_water" value="{{daily.28}}"
                                                                name="out_quantity_of_water" class="form-control">
                                                        </div>
                                                    </div>
                                                </fieldset>

                                            </div>
                                            <div class="col-sm-12 col-lg-6">
                                               <fieldset class="form-group border mt-4 text-white p-3"  style="background-color:#1d4e89">
                                                    <legend class="w-auto px-2">Rolling</legend>
                                                      <div>
                                                        <label for="out_roller_machine_type" class="form-label">Select Machine Type</label>
                                                         <select class="form-select" id="out_roller_machine_type"
                                                                name="out_roller_machine_type">
                                                                <option selected>Select Type</option>
                                                                <option value="passes">Maunal</option>
                                                                <option value="time">Machenized</option>
                                                            </select>
                                                            </div>
                                                    <div class="row">
                                                        <div class="col-lg-6 col-sm-12">
                                                            <label id="out_machinery_id_label"></label>
                                                            <br>
                                                            <label for="out_machinery_id" class="form-label">Select
                                                                Roller</label>
                                                            <input type="hidden" value="{{daily.24}}" name="out_machinery_id"
                                                                id="out_machinery_id">
                                                            <input type="text" name="out_machinery_name" id="out_machinery_name"
                                                                class="form-control" readonly
                                                                placeholder="Click to select machinery">
                                                        </div>
                                                        <div class="col-lg-3 col-sm-12 d-flex">
                                                            <button type="button" class="btn btn-dark mt-2 align-self-end"
                                                                style="font-size:70%"
                                                                onclick="openMachineryModal('out_roller')">Select
                                                                Machinery</button>

                                                        </div>
        <label for="out_roller_machinery_name_operator"
                                                                    class="form-label">Operator Name:</label>
                                                             <input type="text" name="out_roller_machinery_name_operator"
                                                                    id="out_roller_machinery_name_operator" class="form-control">


                                                    </div>
                                                    <div class="col-md-12">
                                                        <label for="out_time_of_application" class="form-label">Time of
                                                            Rolling:</label>

                                                            <div class="d-flex align-items-center justify-content-center">
   <input type="time" id="out_time_of_application_roller" value="{{daily.29}}" name="out_time_roller" class="form-control">
    <button type="button" class="btn d-flex align-items-center justify-content-center p-0 time-reset" id="button-addon2" style="width: 38px;">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-clockwise" viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2z"/>
            <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466"/>
        </svg>
    </button>
</div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <label for="out_rolling_speed" class="form-label">Rolling
                                                                Speed:</label>
                                                            <input type="number" id="out_rolling_speed" value="{{daily.26}}"
                                                                name="out_rolling_speed" class="form-control">
                                                        </div>
                                                    </div>
                                                  
                                                      <div class="row">
                                                        <div class="col-md-6">
                                                            <label for="out_passes-unit" class="form-label">Select
                                                                Unit:</label>
                                                            <select class="form-select" id="out_passes_unit"
                                                                name="out_passes_unit">
                                                                <option selected>Select Unit</option>
                                                                <option value="passes">Passes</option>
                                                                <option value="time">Time</option>
                                                                <option value="hours">Hours</option>
                                                                <option value="minutes">Minutes</option>
                                                            </select>


                                                        </div>
                                                        <div class="col-md-6">
                                                            <label for="out_no_of_passes" class="form-label">Number of
                                                                Passes:</label>
                                                            <input type="text" id="out_no_of_passes"
                                                                name="out_no_of_passes" class="form-control">
                                                        </div>
                                                    </div>
                                                      <div class="mt-3 text-end">
                <button type="button" class="btn btn-primary" onclick="outaddRollingEntry()">Add Rolling Entry</button>
            </div>
                                                </fieldset>
                                            </div>
                                              <div class="col-sm-12 col-lg-4">
                                                <h5 class="mt-4">Rolling Entries</h5>
                                                <table class="table table-bordered" id="outrollingTable" style="font-size: 70%;">
                                                    <thead class="table-dark">
                                                        <tr>
                                                            <th>Machine Type</th>
                                                            <th>Machinery</th>
                                                            <th>Operator</th>
                                                            <th>Speed</th>
                                                            <th>Passes</th>
                                                            <th>Unit</th>
                                                            <th>Time</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody></tbody>
                                                </table>

                                                <input type="hidden" name="out_rolling_entries_json" id="out_rolling_entries_json">
                                            </div>
                                        </div>



                                        <div class="row mt-4">
                                            <div class="col-lg-6 col-sm-12">
                                                  <div>
                                                        <label for="out_mover_machine_type" class="form-label">Select Machine Type</label>
                                                         <select class="form-select" id="out_mover_machine_type"
                                                                name="out_mover_machine_type">
                                                                <option selected>Select Type</option>
                                                                <option value="passes">Maunal</option>
                                                                <option value="time">Machenized</option>
                                                            </select>
                                                            </div>
                                                <label id="out_mover_machinery_id_label"></label>
                                                <br>
                                                <label for="out_mover_machinery_id" class="form-label">Select
                                                    Machinery/Mover</label>
                                                <input type="hidden" value="{{daily.31}}" name="out_mover_machinery_id"
                                                    id="out_mover_machinery_id">
                                                <input type="text" name="out_mover_machinery_name" id="out_mover_machinery_name"
                                                    class="form-control" readonly placeholder="Click to select machinery">
                                            </div>
                                            <div class="col-lg-3 col-sm-12 d-flex">
                                                <button type="button" class="btn btn-dark mt-2 align-self-end"
                                                    style="font-size:70%" onclick="openMachineryModal('out_mover')">Select
                                                    Machinery</button>

                                            </div>

                                            <label for="out_mover_machinery_name_operator"
                                                                    class="form-label">Operator Name:</label>
                                                             <input type="text" name="out_mover_machinery_name_operator"
                                                                    id="out_mover_machinery_name_operator" class="form-control">


                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <label for="out_date_mowing_done_last" class="form-label">Last Mowing Date:</label>
                                                <input type="date" id="out_date_mowing_done_last" value="{{daily.32}}"
                                                    name="out_date_mowing_done_last" class="form-control">
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <label for="out_time_of_application_mover" class="form-label">Time of
                                                    Application Mover:</label>


                                                            <div class="d-flex align-items-center justify-content-center">
   <input type="time" id="out_time_of_application_mover" value="{{daily.33}}"
                                                    name="out_time_of_application_mover" class="form-control">
    <button type="button" class="btn d-flex align-items-center justify-content-center p-0 time-reset" id="button-addon2" style="width: 38px;">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-clockwise" viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2z"/>
            <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466"/>
        </svg>
    </button>
</div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <label for="out_mowing_done_at_mm" class="form-label">Mowing Height
                                                    (mm):</label>
                                                <input type="number" id="out_mowing_done_at_mm" value="{{daily.34}}"
                                                    name="out_mowing_done_at_mm" class="form-control">
                                            </div>
                                        </div>
                                          <div class="row">
                                                             <div class="col-md-6">
                                                            <label for="out_moving_passes_unit" class="form-label">Select
                                                                Unit:</label>
                                                            <select class="form-select" id="out_moving_passes_unit" name="out_moving_passes_unit">
                                                                <option selected>Select Unit</option>
                                                                <option value="time">Time</option>
                                                                <option value="hours">Hours</option>
                                                                <option value="minutes">Minutes</option>
                                                            </select>
                                                            </div>
                                                            <div class="col-md-6">
                                                                <label for="out_mowing_duration" class="form-label">Mowing Duration :</label>
                                                                <input type="number" id="out_mowing_duration"
                                                                    name="out_mowing_duration" class="form-control">
                                                            </div>
 <div class="mt-3 text-end">
                <button type="button" class="btn btn-primary" onclick="outaddMoverEntry()">Add Mover Entry</button>
            </div>
                                                        </div>
                                                           <div class="col-sm-12 col-lg-6">
        <h5 class="mt-4">Mover Entries</h5>
        <table class="table table-bordered" id="outmoverTable" style="font-size: 70%;">
            <thead class="table-dark">
                <tr>
                    <th>Machine Type</th>
                    <th>Machinery</th>
                    <th>Operator</th>
                    <th>Height (mm)</th>
                    <th>Duration</th>
                    <th>Unit</th>
                    <th>Time</th>
                    <th>Date</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>

        <input type="hidden" name="out_mover_entries_json" id="out_mover_entries_json">
    </div>
                                        <div class="row mt-3">
                                            <div class="col-sm-12 col-lg-6">
                                                <div class="input-group mb-3 border rounded">
                                                    <div class="input-group-text bg-light border-0"
                                                        style="background-color:white !important;">
                                                        <input class="form-check-input mt-0 border-left" type="checkbox"
                                                            aria-label="Checkbox for following text input"
                                                            name="out_is_fertilizers_used" {% if daily.35 == "1" %}checked{% endif %}
                                                            id="out_is_fertilizers_used">
                                                    </div>
                                                    <input type="text" class="form-control border-0 mt-2"
                                                        value="Is Fertilizers Used" style="background-color:white" readonly
                                                        aria-label="Text input with checkbox">
                                                </div>
                                            </div>
                                            <div class="col-sm-12 col-lg-6">
                                                <div class="row">
                                                    <div class="col-sm-12 col-lg-6">
                                                        <label for="out_time_of_application_chemical" class="form-label">Time of
                                                            Application Chemical:</label>
                                                    </div>
                                                    <div class="col-sm-12 col-lg-6">

                                                      <div class="d-flex align-items-center justify-content-center">
   <input type="time" id="out_time_of_application_chemical"
                                                    name="out_time_of_application_chemical" class="form-control" value="{{daily.55}}">
    <button type="button" class="btn d-flex align-items-center justify-content-center p-0 time-reset" id="button-addon2" style="width: 38px;">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-clockwise" viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2z"/>
            <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466"/>
        </svg>
    </button>
</div>
                                                    </div>
                                                </div>


                                            </div>

                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <label for="out_fertilizers_details" class="form-label">Chemical
                                                    Details:</label>
                                                <div class="row">
                                                    <div class="col">
                                                        <select id="out_fertilizers_details" name="out_fertilizers_details"
                                                            class="form-control">
                                                            <option value="">Select Any Chemical</option>

                                                        </select>
                                                    </div>
                                                    <div class="col">
                                                        <input type="text" id="out_chemical_weight" placeholder="Weight"
                                                            name="out_chemical_weight" class="form-control" value="{{daily.83}}">
                                                    </div>

                                                    <div class="col">
                                                        <select id="out_fertilizers_unit" name="out_fertilizers_unit"
                                                            class="form-control">
                                                            <option value="">Select Any Unit</option>
                                                            <option value="kg">KG</option>
                                                            <option value="gm">GM</option>
                                                            <option value="ltr">Liters</option>
                                                            <option value="ml">Milli Liters</option>
                                                            <option value="NA">NA</option>
                                                        </select>
                                                    </div>

                                                    <div class="col">
                                                        <input type="text" id="out_chemical_details_remark"
                                                            placeholder="Remarks" name="out_chemical_details_remark"
                                                            value="{{daily.37}}" class="form-control">
                                                    </div>
                                                </div>
  <!-- Table of Added Rows -->
                                                <table class="table table-bordered mt-3" id="outchemicalTable">
                                                    <thead class="table-dark">
                                                        <tr>
                                                            <th>Used</th>
                                                            <th>Time</th>
                                                            <th>Chemical</th>
                                                            <th>Weight</th>
                                                            <th>Unit</th>
                                                            <th>Remark</th>
                                                            <th>Action</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody></tbody>
                                                </table>
                                                <div class="text-end">
                                                    <button type="button" class="btn btn-sm btn-primary"
                                                        id="outaddChemicalBtn">+ Add Chemical Entry</button>
                                                </div>
                                            </div>
                                            <input type="hidden" name="out_chemical_entries" id="out_chemical_entries">
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <label for="out_remark_by_groundsman" class="form-label">Remark by
                                                    Groundsman:</label>
                                                <textarea id="out_remark_by_groundsman" placeholder="Remarks"
                                                    name="out_remark_by_groundsman" class="form-control">{{daily.38}}</textarea>
                                            </div>
                                        </div>

                                         <div class="form-check checkbox-pitch">
                                            <input class="form-check-input custom-checkbox" type="checkbox" id="checkPitchOutfield" name="checkPitchOutfield">
                                            <label class="form-check-label">Is Outfield Form Complete ?</label>
                                        </div>

                                    </div>
                                </div>

                                <div class="tab-pane fade" id="practice-tab-pane" role="tabpanel" aria-labelledby="practice-tab"
                                    tabindex="0">
                                    <div class="form-group border mt-4 text-dark p-3" style="background-color:#a69cac">
                                        <legend class="w-auto px-2">Practice Area Entries</legend>

                                        <div class="row">
                                            <div class="col-sm-12 col-lg-6">
                                                <fieldset class="form-group border mt-4 text-white p-3" style="background-color:#474973">
                                                    <legend class="w-auto px-2">Watering</legend>
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <label for="practice_last_watering_on" class="form-label">Watering
                                                                On:</label>
                                                            <input type="date" id="practice_last_watering_on" value="{{daily.42}}"
                                                                name="practice_last_watering_on" class="form-control">
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <label for="practice_time_of_application" class="form-label">Time
                                                                of
                                                                Watering:</label>

                                                                 <div class="d-flex align-items-center justify-content-center">
   <input type="time" id="practice_time_of_application" value="{{daily.44}}"
                                                                name="practice_time_of_application" class="form-control">
    <button type="button" class="btn d-flex align-items-center justify-content-center p-0 time-reset" id="button-addon2" style="width: 38px;">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-clockwise" viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2z"/>
            <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466"/>
        </svg>
    </button>
</div>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <label for="practice_quantity_of_water" class="form-label">Quantity of
                                                                Water:</label>
                                                            <input type="text" id="practice_quantity_of_water" value="{{daily.43}}"
                                                                name="practice_quantity_of_water" class="form-control">
                                                        </div>
                                                    </div>
                                                </fieldset>

                                            </div>
                                            <div class="col-sm-12 col-lg-6">
                                                 <fieldset class="form-group border mt-4 text-white p-3" style="background-color:#474973">
                                                    <legend class="w-auto px-2">Rolling</legend>
                                                    <div class="row">
                                                             <div>
                                                        <label for="practice_roller_machine_type" class="form-label">Select Machine Type</label>
                                                         <select class="form-select" id="practice_roller_machine_type"
                                                                name="practice_roller_machine_type">
                                                                <option selected>Select Type</option>
                                                                <option value="passes">Maunal</option>
                                                                <option value="time">Machenized</option>
                                                            </select>
                                                            </div>
                                                        <div class="col-lg-6 col-sm-12">
                                                            <label id="practice_machinery_id_label"></label>
                                                            <br>
                                                            <label for="practice_machinery_id" class="form-label">Select
                                                                Roller</label>
                                                            <input type="hidden" value="{{daily.39}}" name="practice_machinery_id"
                                                                id="practice_machinery_id">
                                                            <input type="text"  id="practice_machinery_name"
                                                                class="form-control" readonly
                                                                placeholder="Click to select machinery">
                                                        </div>
                                                        <div class="col-lg-3 col-sm-12 d-flex">
                                                            <button type="button" class="btn btn-dark mt-2 align-self-end"
                                                                style="font-size:70%"
                                                                onclick="openMachineryModal('practice_roller')">Select
                                                                Machinery</button>

                                                        </div>

         <label for="practice_roller_machinery_name_operator"
                                                                    class="form-label">Operator Name:</label>
                                                             <input type="text" name="practice_roller_machinery_name_operator"
                                                                    id="practice_roller_machinery_name_operator" class="form-control">

                                                    </div>
                                                    <div class="col-md-12">
                                                        <label for="practice_time_of_application" class="form-label">Time of
                                                            Rolling:</label>

                                                             <div class="d-flex align-items-center justify-content-center">
    <input type="time" id="practice_time_of_application_roller"
                                                            value="{{daily.45}}" name="practice_time_roller" class="form-control">
    <button type="button" class="btn d-flex align-items-center justify-content-center p-0 time-reset" id="button-addon2" style="width: 38px;">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-clockwise" viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2z"/>
            <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466"/>
        </svg>
    </button>
</div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <label for="practice_rolling_speed" class="form-label">Rolling
                                                                Speed:</label>
                                                            <input type="number" id="practice_rolling_speed" value="{{daily.41}}"
                                                                name="practice_rolling_speed" class="form-control">
                                                        </div>
                                                    </div>
                                                   
                                                     <div class="row">
                                                        <div class="col-md-6">
                                                           <label for="practice_passes-unit" class="form-label">Select
                                                               Unit:</label>
                                                           <select class="form-select" id="practice_passes_unit"
                                                               name="practice_passes_unit">
                                                               <option selected>Select Unit</option>
                                                               <option value="passes">Passes</option>
                                                               <option value="time">Time</option>
                                                               <option value="hours">Hours</option>
                                                               <option value="minutes">Minutes</option>
                                                           </select>


                                                       </div>
                                                        <div class="col-md-6">
                                                            <label for="practice_no_of_passes" class="form-label">Number
                                                                of
                                                                Passes:</label>
                                                            <input type="text" id="practice_no_of_passes"
                                                                name="practice_no_of_passes" class="form-control">
                                                        </div>
                                                    </div>
                                                        <div class="mt-3 text-end">
                <button type="button" class="btn btn-primary" onclick="practiceaddRollingEntry()">Add Rolling Entry</button>
            </div>
                                                </fieldset>
                                            </div>
                                              <div class="col-sm-12 col-lg-4">
        <h5 class="mt-4">Rolling Entries</h5>
        <table class="table table-bordered" id="practicerollingTable" style="font-size: 70%;">
            <thead class="table-dark">
                <tr>
                    <th>Machine Type</th>
                    <th>Machinery</th>
                    <th>Operator</th>
                    <th>Speed</th>
                    <th>Passes</th>
                    <th>Unit</th>
                    <th>Time</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>

        <input type="hidden" name="practice_rolling_entries_json" id="practice_rolling_entries_json">
                                            </div>
                                        </div>



                                        <div class="row mt-4">
                                            <div class="col-lg-6 col-sm-12">
                                                  <div>
                                                        <label for="practice_mover_machine_type" class="form-label">Select Machine Type</label>
                                                         <select class="form-select" id="practice_mover_machine_type"
                                                                name="practice_mover_machine_type">
                                                                <option selected>Select Type</option>
                                                                <option value="passes">Maunal</option>
                                                                <option value="time">Machenized</option>
                                                            </select>
                                                            </div>
                                                <label id="practice_mover_machinery_id_label"></label>
                                                <br>
                                                <label for="practice_mover_machinery_id" class="form-label">Select
                                                    Machinery/Mover</label>
                                                <input type="hidden" value="{{daily.46}}" name="practice_mover_machinery_id"
                                                    id="practice_mover_machinery_id">
                                                <input type="text"  id="practice_mover_machinery_name"
                                                    class="form-control" readonly placeholder="Click to select machinery">
                                            </div>
                                            <div class="col-lg-3 col-sm-12 d-flex">
                                                <button type="button" class="btn btn-dark mt-2 align-self-end"
                                                    style="font-size:70%" onclick="openMachineryModal('practice_mover')">Select
                                                    Machinery</button>

                                            </div>
         <label for="practice_mover_machinery_name_operator"
                                                                    class="form-label">Operator Name:</label>
                                                             <input type="text" name="practice_mover_machinery_name_operator"
                                                                    id="practice_mover_machinery_name_operator" class="form-control">


                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <label for="practice_date_mowing_done_last" class="form-label">
                                                   Last Mowing Date:
                                                </label>
                                                <input type="date" id="practice_date_mowing_done_last" value="{{daily.47}}"
                                                    name="practice_date_mowing_done_last" class="form-control">
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <label for="practice_time_of_application_mover" class="form-label">Time of
                                                    Application Mover:</label>

                                                     <div class="d-flex align-items-center justify-content-center">
   <input type="time" id="practice_time_of_application_mover" value="{{daily.48}}"
                                                    name="practice_time_of_application_mover" class="form-control">
    <button type="button" class="btn d-flex align-items-center justify-content-center p-0 time-reset" id="button-addon2" style="width: 38px;">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-clockwise" viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2z"/>
            <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466"/>
        </svg>
    </button>
</div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <label for="practice_mowing_done_at_mm" class="form-label">Mowing Height
                                                    (mm):</label>
                                                <input type="number" id="practice_mowing_done_at_mm" value="{{daily.49}}"
                                                    name="practice_mowing_done_at_mm" class="form-control">
                                            </div>
                                        </div>
  <div class="row">
                                                             <div class="col-md-6">
                                                            <label for="practice_moving_passes_unit" class="form-label">Select
                                                                Unit:</label>
                                                            <select class="form-select" id="practice_moving_passes_unit" name="practice_moving_passes_unit">
                                                                <option selected>Select Unit</option>
                                                                <option value="time">Time</option>
                                                                <option value="hours">Hours</option>
                                                                <option value="minutes">Minutes</option>
                                                            </select>
                                                            </div>
                                                            <div class="col-md-6">
                                                                <label for="practice_mowing_duration" class="form-label">Mowing Duration :</label>
                                                                <input type="number" id="practice_mowing_duration"
                                                                    name="practice_mowing_duration" class="form-control">
                                                            </div>

                                                        </div>
                                                           <div class="mt-3 text-end">
                <button type="button" class="btn btn-primary" onclick="practiceaddMoverEntry()">Add Mover Entry</button>
            </div>
             <div class="col-sm-12 col-lg-6">
        <h5 class="mt-4">Mover Entries</h5>
        <table class="table table-bordered" id="practicemoverTable" style="font-size: 70%;">
            <thead class="table-dark">
                <tr>
                    <th>Machine Type</th>
                    <th>Machinery</th>
                    <th>Operator</th>
                    <th>Height (mm)</th>
                    <th>Duration</th>
                    <th>Unit</th>
                    <th>Time</th>
                    <th>Date</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>

        <input type="hidden" name="practice_mover_entries_json" id="practice_mover_entries_json">
    </div>

                                        <div class="row mt-3">
                                            <div class="col-sm-12 col-lg-6">
                                                <div class="input-group mb-3 border rounded">
                                                    <div class="input-group-text bg-light border-0"
                                                        style="background-color:white !important;">
                                                        <input class="form-check-input mt-0 border-left" type="checkbox"
                                                            aria-label="Checkbox for following text input"
                                                            name="practice_is_fertilizers_used" {% if daily.50 == "1" %}checked{% endif %}
                                                            id="practice_is_fertilizers_used">
                                                    </div>
                                                    <input type="text" class="form-control border-0 mt-2"
                                                        value="Is Fertilizers Used" style="background-color:white" readonly
                                                        aria-label="Text input with checkbox">
                                                </div>
                                            </div>
                                            <div class="col-sm-12 col-lg-6">
                                                <div class="row">
                                                    <div class="col-sm-12 col-lg-6">
                                                        <label for="practice_time_of_application_chemical" class="form-label">Time of
                                                            Application Chemical:</label>
                                                    </div>
                                                    <div class="col-sm-12 col-lg-6">

                                                     <div class="d-flex align-items-center justify-content-center">
    <input type="time" id="practice_time_of_application_chemical"
                                                    name="practice_time_of_application_chemical" class="form-control" value="{{daily.56}}">
    <button type="button" class="btn d-flex align-items-center justify-content-center p-0 time-reset" id="button-addon2" style="width: 38px;">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-clockwise" viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2z"/>
            <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466"/>
        </svg>
    </button>
</div>
                                                    </div>
                                                </div>


                                            </div>

                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <label for="practice_fertilizers_details" class="form-label">Chemical
                                                    Details:</label>
                                                <div class="row">
                                                    <div class="col">
                                                        <select id="practice_fertilizers_details" name="practice_fertilizers_details"
                                                            class="form-control">
                                                            <option value="">Select Any Chemical</option>

                                                        </select>
                                                    </div>

                                                    <div class="col">
                                                        <input type="text" id="practice_chemical_weight"
                                                            placeholder="Weight" name="practice_chemical_weight"
                                                            class="form-control" value="{{daily.84}}">
                                                    </div>

                                                    <div class="col">
                                                        <select id="practice_fertilizers_unit"
                                                            name="practice_fertilizers_unit" class="form-control">
                                                            <option value="">Select Any Unit</option>
                                                            <option value="kg">KG</option>
                                                            <option value="gm">GM</option>
                                                            <option value="ltr">Liters</option>
                                                            <option value="ml">Milli Liters</option>
                                                            <option value="NA">NA</option>
                                                        </select>
                                                    </div>
                                                    <div class="col">
                                                        <input type="text" id="practice_chemical_details_remark"
                                                            placeholder="Remarks" name="practice_chemical_details_remark"
                                                            value="{{daily.52}}" class="form-control">
                                                    </div>
                                                </div>
                                                 <div class="text-end">
                                                    <button type="button" class="btn btn-sm btn-primary"
                                                        id="practiceAddChemicalBtn">+ Add Chemical Entry</button>
                                                </div>
  <!-- Table of Added Rows -->
                                                <table class="table table-bordered mt-3" id="practiceChemicalTable">
                                                    <thead class="table-dark">
                                                        <tr>
                                                            <th>Used</th>
                                                            <th>Time</th>
                                                            <th>Chemical</th>
                                                            <th>Weight</th>
                                                            <th>Unit</th>
                                                            <th>Remark</th>
                                                            <th>Action</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody></tbody>
                                                </table>

                                                <!-- Hidden field to submit -->
                                                <input type="hidden" name="practice_chemical_entries"
                                                    id="practice_chemical_entries">

                                            </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <label for="practice_remark_by_groundsman" class="form-label">Remark by
                                                    Groundsman:</label>
                                                <textarea id="practice_remark_by_groundsman" placeholder="Remarks"
                                                    name="practice_remark_by_groundsman" class="form-control">{{daily.53}}</textarea>
                                            </div>
                                        </div>

                                         <div class="form-check checkbox-pitch">
                                            <input class="form-check-input custom-checkbox" type="checkbox" id="checkPitchPracticeArea" name="checkPitchPracticeArea">
                                            <label class="form-check-label">Is Practice Field form completed ?</label>
                                        </div>

                                    </div>
                                </div>
                            </div>

                            <div class="col-12">
                                <button type="submit" name="btnSubmit" value="update" class="btn btn-primary">Update</button>
                                <button type="submit" name="btnSubmit" value="save" class="btn btn-primary">Save New</button>
                            </div>
                        </form>
                    </li>
                </ul>

            </div>

            <!-- Machinery Selection Modal -->
            <div class="modal fade" id="machineryModal" tabindex="-1" aria-labelledby="machineryModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="machineryModalLabel">Select Machinery</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Equipment Type</th>
                                        <th>Details</th>



                                    </tr>
                                </thead>
                                <tbody id="machineryList"></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
         <style>
        .hideTab
        {
            visibility: hidden !important;
        }

        .showTab{
            visibility: visible !important;
        }
    </style>

            <!-- Custom Scripts -->
            <script>



                function toggleRollerOptions() {
                    var rollerType = document.getElementById('roller_type').value;
                    if (rollerType === 'manually') {
                        document.getElementById('roller_weight_div').style.display = 'block';
                    } else {
                        document.getElementById('roller_weight_div').style.display = 'none';
                    }
                }
            </script>

            <!-- Axios CDN -->
            <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

            <script>

          const checkBoxArray=[]

          const allTabs=[
            "pitch-main",
            "pitch-practice",
            "outfield",
            "practice-area"
            ]

        const tabsButtonsObject=
            {

            "pitch-main":["main-tab","main-tab-pane"],
            "pitch-practice":["pp-tab","pp-tab-pane"],
            "outfield":["outfield-tab","outfield-tab-pane"],
            "practice-area":["practice-tab","practice-tab-pane"]

            }

        const checkBoxesSubmitObject={
            "pitch-main":"checkPitchMain",
            "pitch-practice":"checkPitchPractice",
            "outfield":"checkPitchOutfield",
            "practice-area":"checkPitchPracticeArea"
        }

                $(document).ready(function () {
                    axios.get("/usr_admin/get_grounds").then((result) => {
                        $("#ground_id").html("")
                        $("#ground_id").append(`<option value=''>Select Ground</option>`)
                        //                $("#ground_id").append(`<option value='all'>All Grounds</option>`)

                        result.data.grounds.forEach(function (g) {
                            $("#ground_id").append(`<option value='${g.ground[0]}'>${g.ground[6]}</option>`)
                        })

                    }).catch((error) => {
                        console.log(error)

                    })


                    function getMachinery(id, label) {
                        axios.get("/usr_admin/machinery/" + id).then((result) => {

                            const m = result.data.machinery
                            $(`#${label}`).text(`ID: ${m.id} Equipment :${m.equipment_name} ${m.print_details}`)
                            $(`#${label}`).addClass("bg-dark text-white p-2")

                        }).catch((error) => {
                            console.log(error)

                        })
                    }

                    // getMachinery("{{daily.9}}", "machinery_id_label")
                    // getMachinery("{{daily.16}}", "mover_machinery_id_label")
                    // getMachinery("{{daily.24}}", "out_machinery_id_label")
                    // getMachinery("{{daily.31}}", "out_mover_machinery_id_label")
                    // getMachinery("{{daily.39}}", "practice_machinery_id_label")
                    // getMachinery("{{daily.46}}", "practice_mover_machinery_id_label")
                    // getMachinery("{{daily.65}}", "pp_machinery_id_label")
                    // getMachinery("{{daily.72}}", "pp_mover_machinery_id_label")

                    // Function to calculate the difference in days between two dates
                    function calculateDays() {

                        var fromDate = $('#from_date').val();
                        var toDate = $('#to_date').val();

                        // Ensure both dates are selected
                        if (fromDate && toDate) {
                            var from = new Date(fromDate);
                            var to = new Date(toDate);

                            // Calculate the difference in milliseconds and convert to days
                            var timeDiff = to - from;
                            var daysDiff = Math.ceil(timeDiff / (1000 * 60 * 60 * 24)) + 1;  // +1 to include the start date

                            // Update the days_count field with the calculated days
                            $('#days_count').val(daysDiff);
                        } else {
                            // Reset to default if dates are not selected
                            $('#days_count').val(1);
                        }
                    }

                    // Trigger calculation on date change
                    $('#from_date, #to_date').on('change', calculateDays);

                    //  $(".tab-pane").removeClass("show")
                    //  $(".tab-pane").removeClass("showTab")

                })

                ///////////////////

                function checkLoadTabs()
                {
                      $(".tab-pane").hide()
                     $("[role='tab']").hide()


                    //  $("button[type='submit']").hide()
                    // $("#main-tab").addClass("hideTab")
                    // //   $("#main-tab-pane").removeClass("active")
                    //   $("#main-tab-pane").removeClass("showTab")
                    // //  $("#main-tab").removeClass("showTab")
                    // //  $("#main-tab").removeClass("hide")
                    //  $("#main-tab-pane").addClass("hideTab")

                    // $("#pp-tab").addClass("hideTab")
                    // $("#pp-tab").removeClass("showTab")

                    //  $("#pp-tab-pane").addClass("hideTab")
                    // $("#pp-tab-pane").removeClass("showTab")

                    // $("#practice-tab").addClass("hideTab")
                    // $("#practice-tab").removeClass("showTab")

                    // $("#outfield-tab").addClass("hideTab")
                    //  $("#outfield-tab").removeClass("showTab")
                    //  $("#btnDailySubmit").addClass("hideTab")

                    if({{daily.61}}==1)
                    {
                         checkBoxArray.push("pitch-main")
                         $(`#${tabsButtonsObject["pitch-main"][0]}`).show()
                         $(`#${tabsButtonsObject["pitch-main"][1]}`).show()
                        //  $(`#${tabsButtonsObject["pitch-main"][1]}`).addClass("show")
                         $(".tab-pane").css("display","auto")
                        //  $("button[type='submit']").show()
                    }
                    else
                    {

                         $(`#${tabsButtonsObject["pitch-main"][0]}`).hide()
                         $(`#${tabsButtonsObject["pitch-main"][1]}`).hide()
                         $(`#${tabsButtonsObject["pitch-main"][1]}`).removeClass("show")
                         $(".tab-pane").css("display","none")
                        //  $("button[type='submit']").hide()
                    }

                    if({{daily.62}}==1)
                    {
                         checkBoxArray.push("pitch-practice")
                         $(`#${tabsButtonsObject["pitch-practice"][0]}`).show()
                         $(`#${tabsButtonsObject["pitch-practice"][1]}`).show()
                        //  $(`#${tabsButtonsObject["pitch-practice"][1]}`).addClass("show")
                         $(".tab-pane").css("display","auto")
                        //  $("button[type='submit']").show()
                    }
                    else
                    {
                         $(`#${tabsButtonsObject["pitch-practice"][0]}`).hide()
                         $(`#${tabsButtonsObject["pitch-practice"][1]}`).hide()
                         $(`#${tabsButtonsObject["pitch-practice"][1]}`).removeClass("show")
                         $(".tab-pane").css("display","auto")
                        //  $("button[type='submit']").show()

                    }

                    if({{daily.63}}==1)
                    {
                         checkBoxArray.push("outfield")
                          $(`#${tabsButtonsObject["outfield"][0]}`).show()
                         $(`#${tabsButtonsObject["outfield"][1]}`).show()
                        //  $(`#${tabsButtonsObject["outfield"][1]}`).addClass("show")
                         $(".tab-pane").css("display","auto")
                        //  $("button[type='submit']").show()
                    }
                    else
                    {
                        //  checkBoxArray.push("outfield")
                         $(`#${tabsButtonsObject["outfield"][0]}`).hide()
                         $(`#${tabsButtonsObject["outfield"][1]}`).hide()
                         $(`#${tabsButtonsObject["outfield"][1]}`).removeClass("show")
                         $(".tab-pane").css("display","auto")
                        //  $("button[type='submit']").hide()
                    }

                    if({{daily.64}}==1)
                    {
                         checkBoxArray.push( "practice-area")
                         $(`#${tabsButtonsObject["practice-area"][0]}`).show()
                         $(`#${tabsButtonsObject["practice-area"][1]}`).show()
                        //  $(`#${tabsButtonsObject["practice-area"][1]}`).addClass("show")
                        //  $(".tab-pane").css("display","auto")
                        //
                    }
                      else
                    {
                        //  checkBoxArray.push("outfield")
                         $(`#${tabsButtonsObject["practice-area"][0]}`).hide()
                         $(`#${tabsButtonsObject["practice-area"][1]}`).hide()
                         $(`#${tabsButtonsObject["practice-area"][1]}`).removeClass("show")
                         $(".tab-pane").css("display","auto")
                        //
                    }


                    console.log(checkBoxArray)
                    if(checkBoxArray.length>0)
                    {
                        $("button[type='submit']").show()
                        // $("#main-tab").prop("disabled", true);
                    }
                    else
                    {
                        $("button[type='submit']").hide()
                    }

                    console.log(tabsButtonsObject)

                       $(`#${tabsButtonsObject[checkBoxArray[0]][1]}`).show()
                       $(`#${tabsButtonsObject[checkBoxArray[0]][1]}`).addClass("show")

                }



                checkLoadTabs()



        function addToArrayCheckbox(event)
        {
            if(event.target.checked)
            {
                checkBoxArray.push(event.target.id)

            }
            else
            {
                const index=checkBoxArray.indexOf(event.target.id)
                index>-1?checkBoxArray.splice(index,1):checkBoxArray

            }
            console.log(checkBoxArray)
        }

        function addChemicalsToSelect(fertilizers, select) {
            fertilizers.forEach(function (fert) {
                const option = document.createElement("option");
                option.value = fert.id;
                option.textContent = `${fert.name} (${fert.type})`;
                select.appendChild(option);
            });
        }

        axios.get('/usr_admin/get-fertilizers-json/')
            .then(function (response) {
                const fertilizers = response.data.fertilizers;
                const select = document.getElementById("fertilizers_details");
                const ppSelect = document.getElementById("pp_fertilizers_details");
                const outSelect = document.getElementById("out_fertilizers_details");
                const practiceSelect = document.getElementById("practice_fertilizers_details");
                addChemicalsToSelect(fertilizers, select)
                addChemicalsToSelect(fertilizers, ppSelect)
                addChemicalsToSelect(fertilizers, outSelect)
                addChemicalsToSelect(fertilizers, practiceSelect)

            })
            .catch(function (error) {
                console.error("Error fetching fertilizers:", error);
            });


        function allAreaTabHideShow(event)
        {
            $(".tab-pane").removeClass("active")
            $(".tab-pane").removeClass("show")

             const filteredTabs= allTabs.filter(function(tab){
                     return $(`#${tab}`).prop("checked")
                 })
                 if(filteredTabs.length<1)
                 {
                     $("button[type='submit']").hide()
                //   $("button[type='submit']").removeClass("showTab")
                 }
                 for(let e of filteredTabs)
                 {
                     $(`#${tabsButtonsObject[e][0]}`).removeClass("active")
                 //  $(`#${tabsButtonsObject[e][1]}`).removeClass("showTab")
                     $(`#${tabsButtonsObject[e][1]}`).removeClass("active")
                //   $(`#${tabsButtonsObject[event.target.id][1]}`).removeClass("show")
                 }
                if(event.target.checked)
                {

                     $("button[type='submit']").show()
                     $(`#${tabsButtonsObject[event.target.id][0]}`).show()
                    //  $(`#${tabsButtonsObject[event.target.id][0]}`).removeClass("hideTab")
                     $(`#${tabsButtonsObject[event.target.id][0]}`).addClass("active")
                     $(`#${tabsButtonsObject[event.target.id][1]}`).show()
                     $(`#${tabsButtonsObject[event.target.id][1]}`).addClass("active")
                     $(`#${tabsButtonsObject[event.target.id][1]}`).addClass("show")

                }
                else
                {
                    // $("button[type='submit']").hide()

                     $(`#${tabsButtonsObject[event.target.id][0]}`).hide()
                     $(`#${tabsButtonsObject[event.target.id][1]}`).hide()
                    //  $(`#${tabsButtonsObject[event.target.id][0]}`).addClass("hideTab")
                     $(`#${tabsButtonsObject[event.target.id][1]}`).removeClass("active")
                     $(`#${tabsButtonsObject[checkBoxArray[0]][0]}`).addClass("active")
                    //  $(`#${tabsButtonsObject[e][1]}`).removeClass("showTab")
                     $(`#${tabsButtonsObject[checkBoxArray[0]][1]}`).addClass("active")
                     $(`#${tabsButtonsObject[checkBoxArray[0]][1]}`).addClass("show")

                }
        }


        $("#pitch-main").change(async function(event)
        {
            await addToArrayCheckbox(event)
            allAreaTabHideShow(event)
        })

         $("#pitch-practice").change(async function(event)
        {
            await addToArrayCheckbox(event)
            //console.log(event.target.id)
            allAreaTabHideShow(event)
        })

         $("#outfield").change(async function(event)
        {
            await addToArrayCheckbox(event)
            //console.log(event.target.id)
            allAreaTabHideShow(event)
        })

         $("#practice-area").change(async function(event)
        {
            await addToArrayCheckbox(event)
            //console.log(event.target.id)
            allAreaTabHideShow(event)
        })






        $("#pitch_id").change(function(event){

            const optionVal=$(event.target).val()

            const optionText=$("#pitch_id option:selected").text()

            if(optionText.indexOf("all")>-1)
            {
                  $(".tab-pane").removeClass("active")
                  $(".tab-pane").removeClass("show")
                  $("#main-tab").hide()
                    //   $("#main-tab-pane").addClass("active")
                //   $("#main-tab-pane").hide()
                // //   $("#main-tab").removeClass("showTab")
                //     //  $("#main-tab").removeClass("hide")
                //     //  $("#main-tab-pane").removeClass("hide")

                //     $("#pp-tab").hide()
                //     // $("#pp-tab").removeClass("showTab")

                //     $("#practice-tab").hide()
                //     // $("#practice-tab").removeClass("showTab")

                //     $("#outfield-tab").hide()
                //     //  $("#outfield-tab").removeClass("showTab")

                    $("button[type='submit']").hide()
                      $(".tab-pane").hide()
                       $("[role='tab']").hide()
                       checkLoadTabs()
                    //   $(".tab-pane").addClass("hideTab")
                    //   $("#btnDailySubmit").addClass("showTab")

            }
            else if(!(optionText.indexOf("all")>-1 || optionText.indexOf("Select")>-1))
            {
                $(".tab-pane").removeClass("active")
                 $("button[type='submit']").show()
                //  $("#btnDailySubmit").addClass("showTab")
                if(optionText.indexOf("main")>-1)
                {
                    $(".tab-pane").hide()
                    $("[role='tab']").hide()
                     $("#main-tab").show()
                      $("#main-tab-pane").addClass("active")
                       $("#main-tab-pane").addClass("show")
                       $("#main-tab-pane").show()
                    //   $("#main-tab-pane").addClass("showTab")
                    //  $("#main-tab").removeClass("hideTab")
                    //  $("#main-tab").removeClass("hide")
                    //  $("#main-tab-pane").removeClass("hide")

                    // $("#pp-tab").hide()
                    // // $("#pp-tab").removeClass("showTab")
                    // // $("#pp-tab-pane").addClass("active")

                    // $("#practice-tab").hide()
                    // // $("#practice-tab").removeClass("showTab")

                    // $("#outfield-tab").hide()
                    //  $("#outfield-tab").removeClass("showTab")
                     $("button[type='submit']").show()

                    checkBoxArray.splice(0,checkBoxArray.length)


                checkBoxArray.push("pitch-main")


            console.log(checkBoxArray)
                }

                else if(optionText.indexOf("practice")>-1)
                {
                    $(".tab-pane").hide()
                    $("[role='tab']").hide()
                    //  $("#main-tab").removeClass("showTab")
                    //  $("#main-tab").removeClass("hide")
                    //  $("#main-tab-pane").removeClass("hide")

                    $("#pp-tab").show()
                     $("#pp-tab-pane").addClass("active")
                      $("#pp-tab-pane").addClass("show")
                     $("#pp-tab-pane").show()
                    // $("#pp-tab").removeClass("hideTab")

                    // $("#practice-tab").hide()
                    // // $("#practice-tab").removeClass("showTab")

                    // $("#outfield-tab").hide()
                    //  $("#outfield-tab").removeClass("showTab")
                        $("button[type='submit']").show()

                         checkBoxArray.splice(0,checkBoxArray.length)


                checkBoxArray.push("pitch-practice")


            console.log(checkBoxArray)
                }
                // console.log("main/practice")


            }

            //   $("#btnDailySubmit").addClass("hideTab")
                    //   $("#btnDailySubmit").removeClass("showTab")

        })


       function handleSubmit(form) {
    // const filteredTabs = allTabs.filter(tab => $(`#${tab}`).prop("checked"));

    // Check if at least one tab is selected
    if (checkBoxArray.length < 1) {
        alert("Please select at least one tab.");
        return false;
    }

    // Check if corresponding checkboxes are confirmed
    let allConfirmed = true;
    for (let e of checkBoxArray) {
        if (!$(`#${checkBoxesSubmitObject[e]}`).prop("checked")) {
            alert(e + " form is not confirmed as a filled form");
            allConfirmed = false;
        }
    }

    // Prevent form submission if any required checkbox is unchecked
    if (!allConfirmed) {
        return false;
    }

    // Submit the form if all conditions are met
    form.submit();
    return true;
}


                //////////////////







                $("#out_is_fertilizers_used").change(function () {
                    if ($(this).prop("checked") === true) {
                        $("#out_fertilizers_details").prop("required", true)
                    }
                    else {
                        $("#out_fertilizers_details").prop("required", false)
                    }


                });
                $("#practice_is_fertilizers_used").change(function () {
                    if ($(this).prop("checked") === true) {
                        $("#practice_fertilizers_details").prop("required", true)
                    }
                    else {
                        $("#practice_fertilizers_details").prop("required", false)
                    }


                });
                $("#is_fertilizers_used").change(function () {
                    if ($(this).prop("checked") === true) {
                        $("#fertilizers_details").prop("required", true)
                    }
                    else {
                        $("#fertilizers_details").prop("required", false)
                    }


                });

                 $("#pp_is_fertilizers_used").change(function () {
                    if ($(this).prop("checked") === true) {
                        $("#pp_fertilizers_details").prop("required", true)
                    }
                    else {
                        $("#pp_fertilizers_details").prop("required", false)
                    }


                });

                $("#ground_id").change(function () {
                    const groundId = $(this).val().trim()
                    $("#ground_id_text").val(groundId)
                    if (groundId == "all") {
                        axios.get(`/usr_admin/get_all_pitches`).then((result) => {
                            // console.log(result.data.grounds)
                            $("#pitch_id").html("")
                            $("#pitch_id").append(`<option value=''>Select Pitch</option>`)
                            //                    $("#pitch_id").append(`<option value='all'>All Pitches</option>`)

                            result.data.grounds.forEach(function (p) {
                                $("#pitch_id").append(`<option value='${p.pitches[0]}'>${p.pitches[14]}  ${p.pitches[5]}</option>`)
                            })
                        }).catch((error) => {
                            console.log(error)

                        })
                    } else {
                        axios.get(`/usr_admin/get_pitches/${groundId}`).then((result) => {
                            console.log(result.data.grounds)
                            $("#pitch_id").html("")
                            $("#pitch_id").append(`<option value=''>Select Pitch</option>`)
                            //                    $("#pitch_id").append(`<option value='all'>All Pitches</option>`)

                            result.data.grounds.forEach(function (p) {
                                $("#pitch_id").append(`<option value='${p.pitch[0]}'>${p.pitch[14]}  ${p.pitch[5]}</option>`)
                            })
                        }).catch((error) => {
                            console.log(error)

                        })
                    }

                })

                $("#pitch_id").change(function () {


                    const pitchId = $(this).val().trim()
                    const groundId = $("#ground_id").val().trim()

                    $("#pitch_id_text").val(pitchId)
                    $("#ground_id_text").val(groundId)

                    if (pitchId !== "all") {

                        axios.get(`/usr_admin/get_pitch/${pitchId}`).then((result) => {
                            const pitch = result.data.grounds[0].pitch

                            console.log(pitch)
                            $("#pitch_location").prop("disabled", false)
                            $("#pitch_location").prop("readonly", true)
                              $("#pitch_location").val(`${pitch[14]} ${pitch[5]}`)

                        }).catch((error) => {
                            console.log(error)

                        })
                    } else if (pitchId === "all") {
                        $("#pitch_location").prop("disabled", true)
                    }
                })



            </script>


        </body>


        <script>
            $(document).ready(function () {

                $("#recording_type").val("{{daily.57}}")
                $("#fertilizers_details").val("{{daily.21|default:''}}")
                $("#out_fertilizers_details").val("{{daily.36|default:''}}")
                $("#practice_fertilizers_details").val("{{ daily.51|default:'' }}")
                $("#pp_fertilizers_details").val("{{ daily.77|default:'' }}")

                $("#fertilizers_unit").val("{{ daily.85|default:'' }}")
                $("#pp_fertilizers_unit").val("{{ daily.86|default:'' }}")
                $("#out_fertilizers_unit").val("{{ daily.87|default:'' }}")
                $("#practice_fertilizers_unit").val("{{ daily.88|default:'' }}")


                axios.get(`/usr_admin/get_pitch/{{daily.1}}`).then((result) => {
                            const pitch = result.data.grounds[0].pitch

                            // console.log(pitch)
                            if(pitch[4]=="0")
                            {
                                $("#pitch_id_label").html("Pitch type="+pitch[5]+" Location="+pitch[14])

                            }
                            else
                            {
                                $("#pitch_id_label").html("pitch no="+pitch[4]+" pitch location="+pitch[14])
                            }


                        }).catch((error) => {
                            console.log(error)

                        })

                axios.get(`/usr_admin/get_ground/{{daily.58}}`).then((result) => {
                            const ground = result.data.ground

                            // console.log(pitch)

                                $("#ground_id_label").html(ground[6])





                        }).catch((error) => {
                            console.log(error)

                        })



        $(".time-reset").click(function () {
        let timeInput = $(this).siblings("input[type='time']");
         timeInput.val("");
        })


            })
        </script>

<!-- main -->
<script>
     let rollingEntries = [];

    async function loadRolling() {
        
    
    async function machineName(params) {
       return await getMachineryName(params)
    }
     async function getMachineryName(id) 
     {
        try {
        const response = await axios.get("/usr_admin/machinery/" + id);
        return response.data.machinery.print_details;
    } catch (e) {
        console.log(e);
        return "Unknown";
    }
     }
   
     function getSplit(val)
    {
        return val.split("__####__").filter(e => e.trim() !== "");
    }
   
        
  const machineryId = getSplit("{{ daily.9|default:'' }}"); // machinery_id
    const passes = getSplit("{{ daily.10|default:'' }}"); // no_of_passes
    const speed = getSplit("{{ daily.11|default:'' }}"); // rolling_speed
    const unit = getSplit("{{ daily.113|default:'' }}"); // passes_unit
    const time = getSplit("{{ daily.14|default:'' }}"); // time_roller
    const machineType = getSplit("{{ daily.105|default:'' }}"); // roller_machine_type
    const operator = getSplit("{{ daily.106|default:'' }}"); // roller_machinery_name_operator

const namePromises = machineryId.map(id => machineName(id));
    const names = await Promise.all(namePromises);
if(machineryId.length>0)
{
    for(let i=0;i<machineryId.length;i++)
{
 const entry = {
            machineType:machineType[i],
            machineryId:machineryId[i],
            operator:operator[i],
            speed:speed[i],
            passes:passes[i],
            unit:unit[i],
            time:time[i],
            machineryName:names[i]
        };
// const machineryName=getSplit("{{daily.72}}")
// console.log(entry)
rollingEntries.push(entry);
       
        // console.log(rollingEntries)
    }
     updateRollingTable();
}
    

}
loadRolling()

    function addRollingEntry() {
        const machineType = document.getElementById("roller_machine_type").value;
        const machineryName = document.getElementById("machinery_name").value;
        const machineryId = document.getElementById("machinery_id").value;
        const operator = document.getElementById("roller_machinery_name_operator").value;
        const speed = document.getElementById("rolling_speed").value;
        const passes = document.getElementById("no_of_passes").value;
        const unit = document.getElementById("passes_unit").value;
        const time = document.getElementById("time_roller").value;

        if (!machineType || !machineryName || !operator || !speed || !passes || !unit || !time) {
            alert("Please fill all fields before adding.");
            return;
        }

        const entry = {
            machineType,
            machineryId,
            machineryName,
            operator,
            speed,
            passes,
            unit,
            time
        };

        rollingEntries.push(entry);
        updateRollingTable();
    }

    function updateRollingTable() {
        const tableBody = document.querySelector("#rollingTable tbody");
        tableBody.innerHTML = "";

        rollingEntries.forEach(entry => {
            const row = document.createElement("tr");
            row.innerHTML = `
                <td>${entry.machineType}</td>
                <td>${entry.machineryName}</td>
                <td>${entry.operator}</td>
                <td>${entry.speed}</td>
                <td>${entry.passes}</td>
                <td>${entry.unit}</td>
                <td>${entry.time}</td>
            `;
            tableBody.appendChild(row);
        });

        document.getElementById("rolling_entries_json").value = JSON.stringify(rollingEntries);
    }
</script>

<script>
    let moverEntries = [];

    async function loadMover() {
    async function machineNameOut(params) {
       return await getMachineryNameOut(params)
    }
     async function getMachineryNameOut(id) 
     {
        try {
        const response = await axios.get("/usr_admin/machinery/" + id);
        return response.data.machinery.print_details;
    } catch (e) {
        console.log(e);
        return "Unknown";
    }
     }
   
     function getSplit(val)
    {
        return val.split("__####__").filter(e => e.trim() !== "");
    }
   
         
const machineryId=getSplit("{{daily.16}}")
const unit=getSplit("{{daily.103}}")
const time=getSplit("{{daily.18}}")
const type=getSplit("{{daily.101}}")
const operator=getSplit("{{daily.102}}")
const date=getSplit("{{daily.17}}")
const mowHeight=getSplit("{{daily.19}}")
const duration=getSplit("{{daily.104}}")

const namePromises = machineryId.map(id => machineNameOut(id));
    const names = await Promise.all(namePromises);


if(machineryId.length>0)
{
    for(let i=0;i<machineryId.length;i++)
{
 const entry = {
            type:type[i],
            machineryId:machineryId[i],
            machineryName:names[i],
            operator:operator[i],
           duration:duration[i],
           
            unit:unit[i],
            time:time[i],
            mowHeight:mowHeight[i],
            date:date[i]


          
        };
// const machineryName=getSplit("{{daily.72}}")
console.log(entry)
moverEntries.push(entry);
console.log(moverEntries)
}
updateMoverTable();
}
    

}
loadMover()

     
    function addMoverEntry() {
        const type = document.getElementById("mover_machine_type").value;
        const machineryName = document.getElementById("mover_machinery_name").value;
        const machineryId = document.getElementById("mover_machinery_id").value;
        const operator = document.getElementById("mover_machinery_name_operator").value;
        const mowHeight = document.getElementById("mowing_done_at_mm").value;
        const unit = document.getElementById("moving_passes_unit").value;
        const duration = document.getElementById("mowing_duration").value;
        const time = document.getElementById("time_of_application_mover").value;
        const date = document.getElementById("date_mowing_done_last").value;

        if (!type || !machineryName || !operator || !unit || !duration || !time || !date || !mowHeight) {
            alert("Please fill all fields before adding.");
            return;
        }

        const entry = {
            type,
            machineryId,
            machineryName,
            operator,
            mowHeight,
            unit,
            duration,
            time,
            date
        };

        moverEntries.push(entry);
        updateMoverTable();
    }

    function updateMoverTable() {
        const tbody = document.querySelector("#moverTable tbody");
        tbody.innerHTML = "";

        moverEntries.forEach(e => {
            tbody.innerHTML += `
                <tr>
                    <td>${e.type}</td>
                    <td>${e.machineryName}</td>
                    <td>${e.operator}</td>
                    <td>${e.mowHeight}</td>
                    <td>${e.duration}</td>
                    <td>${e.unit}</td>
                    <td>${e.time}</td>
                    <td>${e.date}</td>
                </tr>
            `;
        });

        document.getElementById("mover_entries_json").value = JSON.stringify(moverEntries);
    }
</script>




<!-- pp -->
<script>
    let pprollingEntries = [];

    
    async function pploadRolling() {
        function getSplit(val) {
            return val.split("__####__").filter(e => e.trim() !== "");
        }

        async function getMachineryName(id) {
            try {
                const response = await fetch("/usr_admin/machinery/" + id);
                if (!response.ok) throw new Error("Fetch failed");
                const data = await response.json();
                return data.machinery.print_details;
            } catch (e) {
                console.error(e);
                return "Unknown";
            }
        }

        // Extract values from backend
        const machineType = getSplit("{{ daily.65|default:'' }}");
        const operator = getSplit("{{ daily.66|default:'' }}");
        const speed = getSplit("{{ daily.67|default:'' }}");
        const passes = getSplit("{{ daily.68|default:'' }}");
        const unit = getSplit("{{ daily.90|default:'' }}");
        const time = getSplit("{{ daily.71|default:'' }}");
        const machineryId = getSplit("{{ daily.61|default:'' }}");

        const namePromises = machineryId.map(id => getMachineryName(id));
        const machineryNames = await Promise.all(namePromises);

        for (let i = 0; i < machineryId.length; i++) {
            const entry = {
                machineType: machineType[i],
                machineryId: machineryId[i],
                machineryName: machineryNames[i],
                operator: operator[i],
                speed: speed[i],
                passes: passes[i],
                unit: unit[i],
                time: time[i]
            };
            pprollingEntries.push(entry);
        }

        ppupdateRollingTable();
    }

    // Call this on page load
    document.addEventListener("DOMContentLoaded", pploadRolling);



    function ppaddRollingEntry() {
        const machineType = document.getElementById("pp_roller_machine_type").value;
        const machineryName = document.getElementById("pp_machinery_name").value;
        const machineryId = document.getElementById("pp_machinery_id").value;
        const operator = document.getElementById("pp_roller_machinery_name_operator").value;
        const speed = document.getElementById("pp_rolling_speed").value;
        const passes = document.getElementById("pp_no_of_passes").value;
        const unit = document.getElementById("pp_passes_unit").value;
        const time = document.getElementById("pp_time_roller").value;

        if (!machineType || !machineryName || !operator || !speed || !passes || !unit || !time) {
            alert("Please fill all fields before adding.");
            return;
        }

        const entry = {
            machineType,
            machineryId,
            machineryName,
            operator,
            speed,
            passes,
            unit,
            time
        };

        pprollingEntries.push(entry);
        ppupdateRollingTable();
    }

    function ppupdateRollingTable() {
        const tableBody = document.querySelector("#pprollingTable tbody");
        tableBody.innerHTML = "";

        pprollingEntries.forEach(entry => {
            const row = document.createElement("tr");
            row.innerHTML = `
                <td>${entry.machineType}</td>
                <td>${entry.machineryName}</td>
                <td>${entry.operator}</td>
                <td>${entry.speed}</td>
                <td>${entry.passes}</td>
                <td>${entry.unit}</td>
                <td>${entry.time}</td>
            `;
            tableBody.appendChild(row);
        });

        document.getElementById("pp_rolling_entries_json").value = JSON.stringify(pprollingEntries);
    }
</script>


 <script>
    let ppmoverEntries = [];

    
    async function pploadMover() {
        function getSplit(val) {
            return val.split("__####__").filter(e => e.trim() !== "");
        }

        async function getMachineryName(id) {
            try {
                const response = await fetch("/usr_admin/machinery/" + id);
                if (!response.ok) throw new Error("Fetch failed");
                const data = await response.json();
                return data.machinery.print_details;
            } catch (e) {
                console.error(e);
                return "Unknown";
            }
        }

        // Extract fields from Django template
        const type = getSplit("{{ daily.93|default:'' }}");
        const machineryId = getSplit("{{ daily.62|default:'' }}");
        const operator = getSplit("{{ daily.94|default:'' }}");
        const mowHeight = getSplit("{{ daily.70|default:'' }}");
        const unit = getSplit("{{ daily.95|default:'' }}");
        const duration = getSplit("{{ daily.96|default:'' }}");
        const time = getSplit("{{ daily.69|default:'' }}");
        const date = getSplit("{{ daily.64|default:'' }}");

        const namePromises = machineryId.map(id => getMachineryName(id));
        const machineryNames = await Promise.all(namePromises);

        for (let i = 0; i < machineryId.length; i++) {
            const entry = {
                type: type[i],
                machineryId: machineryId[i],
                machineryName: machineryNames[i],
                operator: operator[i],
                mowHeight: mowHeight[i],
                unit: unit[i],
                duration: duration[i],
                time: time[i],
                date: date[i]
            };
            ppmoverEntries.push(entry);
        }

        ppupdateMoverTable();
    }

    document.addEventListener("DOMContentLoaded", pploadMover);



    function ppaddMoverEntry() {
        const type = document.getElementById("pp_mover_machine_type").value;
        const machineryName = document.getElementById("pp_mover_machinery_name").value;
        const machineryId = document.getElementById("pp_mover_machinery_id").value;
        const operator = document.getElementById("pp_mover_machinery_name_operator").value;
        const mowHeight = document.getElementById("pp_mowing_done_at_mm").value;
        const unit = document.getElementById("pp_moving_passes_unit").value;
        const duration = document.getElementById("pp_mowing_duration").value;
        const time = document.getElementById("pp_time_of_application_mover").value;
        const date = document.getElementById("pp_date_mowing_done_last").value;

        if (!type || !machineryName || !operator || !unit || !duration || !time || !date || !mowHeight) {
            alert("Please fill all fields before adding.");
            return;
        }

        const entry = {
            type,
            machineryId,
            machineryName,
            operator,
            mowHeight,
            unit,
            duration,
            time,
            date
        };

        ppmoverEntries.push(entry);
        ppupdateMoverTable();
    }

    function ppupdateMoverTable() {
        const tbody = document.querySelector("#ppmoverTable tbody");
        tbody.innerHTML = "";

        ppmoverEntries.forEach(e => {
            tbody.innerHTML += `
                <tr>
                    <td>${e.type}</td>
                    <td>${e.machineryName}</td>
                    <td>${e.operator}</td>
                    <td>${e.mowHeight}</td>
                    <td>${e.duration}</td>
                    <td>${e.unit}</td>
                    <td>${e.time}</td>
                    <td>${e.date}</td>
                </tr>
            `;
        });

        document.getElementById("pp_mover_entries_json").value = JSON.stringify(ppmoverEntries);
    }
</script>


<script>

    async function pploadChemical() {
        function getSplit(val) {
            return val.split("__####__").filter(e => e.trim() !== "");
        }

        // Convert "1"/"0" to Yes/No
        const usedList = getSplit("{{ daily.76|default:'' }}").map(v => v === "1" ? "Yes" : "No");
        const timeList = getSplit("{{ daily.80|default:'' }}");
        const chemIdList = getSplit("{{ daily.77|default:'' }}");
        const weightList = getSplit("{{ daily.82|default:'' }}");
        const unitList = getSplit("{{ daily.86|default:'' }}");
        const remarkList = getSplit("{{ daily.78|default:'' }}");

        // Fetch chemical names for each ID
        async function getChemicalName(id) {
            try {
                const res = await fetch("/get_chemical/" + id);
                if (!res.ok) throw new Error("Fetch error");
                const data = await res.json();
                return data.name;
            } catch (err) {
                console.error(err);
                return "Unknown";
            }
        }

        const chemNamePromises = chemIdList.map(id => getChemicalName(id));
        const chemNames = await Promise.all(chemNamePromises);

        const tableBody = document.querySelector("#ppchemicalTable tbody");
        tableBody.innerHTML = "";

        const entries = [];

        for (let i = 0; i < chemIdList.length; i++) {
            const entry = {
                pp_is_fertilizers_used: usedList[i] || "No",
                pp_time_of_application_chemical: timeList[i] || "",
                pp_fertilizers_details: chemNames[i],
                pp_chemical_weight: weightList[i] || "",
                pp_chemical_unit: unitList[i] || "",
                pp_chemical_details_remark: remarkList[i] || ""
            };

            entries.push(entry);

            const row = document.createElement("tr");
            row.innerHTML = `
                <td>${entry.pp_is_fertilizers_used}</td>
                <td>${entry.pp_time_of_application_chemical}</td>
                <td>${entry.pp_fertilizers_details}</td>
                <td>${entry.pp_chemical_weight}</td>
                <td>${entry.pp_chemical_unit}</td>
                <td>${entry.pp_chemical_details_remark}</td>
                <td><button type="button" class="btn btn-sm btn-danger delete-row">X</button></td>
            `;
            tableBody.appendChild(row);
        }

        document.getElementById("pp_chemical_entries").value = JSON.stringify(entries);
    }

    document.addEventListener("DOMContentLoaded", pploadChemical);


                                            document.getElementById("ppaddChemicalBtn").addEventListener("click", function () {
                                                const used = document.getElementById("pp_is_fertilizers_used").checked ? "Yes" : "No";
                                                const time = document.getElementById("pp_time_of_application_chemical").value;
                                                const chemical = document.getElementById("pp_fertilizers_details").selectedOptions[0].text;
                                                const weight = document.getElementById("pp_chemical_weight").value;
                                                const unit = document.getElementById("pp_fertilizers_unit").value;
                                                const remark = document.getElementById("pp_chemical_details_remark").value;

                                                // if (!chemical || !time) {
                                                //   alert("Please fill required fields: Chemical and Time.");
                                                //   return;
                                                // }

                                                const tableBody = document.querySelector("#ppchemicalTable tbody");
                                                const row = document.createElement("tr");

                                                row.innerHTML = `<td>${used}</td>
<td>${time}</td>
<td>${chemical}</td>
<td>${weight}</td>
<td>${unit}</td>
<td>${remark}</td>
<td><button type="button" class="btn btn-sm btn-danger delete-row">X</button></td>
`;
                                                tableBody.appendChild(row);

                                                // Reset inputs
                                                // document.getElementById("time_of_application_chemical").value = "";
                                                // document.getElementById("fertilizers_details").value = "";
                                                // document.getElementById("chemical_weight").value = "";
                                                // document.getElementById("fertilizers_unit").value = "";
                                                // document.getElementById("chemical_details_remark").value = "";

                                                updateppChemicalData();
                                            });

                                            document.querySelector("#ppchemicalTable").addEventListener("click", function (e) {
                                                if (e.target.classList.contains("delete-row")) {
                                                    e.target.closest("tr").remove();
                                                    updateChemicalData();
                                                }
                                            });

                                            function updateppChemicalData() {
                                                const rows = document.querySelectorAll("#ppchemicalTable tbody tr");
                                                const data = Array.from(rows).map(row => {
                                                    const cells = row.querySelectorAll("td");
                                                    return {
                                                        pp_is_fertilizers_used: cells[0].innerText,
                                                        pp_time_of_application_chemical: cells[1].innerText,
                                                        pp_fertilizers_details: cells[2].innerText,
                                                        pp_chemical_weight: cells[3].innerText,
                                                        pp_chemical_unit: cells[4].innerText,
                                                        pp_chemical_details_remark: cells[5].innerText
                                                    };
                                                });
                                                document.getElementById("pp_chemical_entries").value = JSON.stringify(data);
                                            }

                                            // Final form submit validation (optional)
                                            function handleSubmit(form) {
                                                const hiddenField = document.getElementById("pp_chemical_entries").value;
                                                if (!hiddenField || hiddenField === "[]") {
                                                    alert("Please add at least one chemical entry.");
                                                    return false;
                                                }
                                                return true;
                                            }
</script>
                                      
<!-- outfield -->

<script>
     let outrollingEntries = [];

    async function outloadRolling() {
        
    
    async function machineName(params) {
       return await getMachineryName(params)
    }
     async function getMachineryName(id) 
     {
        try {
        const response = await axios.get("/usr_admin/machinery/" + id);
        return response.data.machinery.print_details;
    } catch (e) {
        console.log(e);
        return "Unknown";
    }
     }
   
     function getSplit(val)
    {
        return val.split("__####__").filter(e => e.trim() !== "");
    }
   
        
const machineryId=getSplit("{{daily.24}}")
const passes=getSplit("{{daily.25}}")
const speed=getSplit("{{daily.26}}")
const unit=getSplit("{{daily.114}}")
const time=getSplit("{{daily.29}}")
const machineType=getSplit("{{daily.109}}")
const operator=getSplit("{{daily.110}}")

const namePromises = machineryId.map(id => machineName(id));
    const names = await Promise.all(namePromises);
if(machineryId.length>0)
{
    for(let i=0;i<machineryId.length;i++)
{
 const entry = {
            machineType:machineType[i],
            machineryId:machineryId[i],
            operator:operator[i],
            speed:speed[i],
            passes:passes[i],
            unit:unit[i],
            time:time[i],
            machineryName:names[i]
        };
// const machineryName=getSplit("{{daily.72}}")
// console.log(entry)
outrollingEntries.push(entry);
       
        // console.log(rollingEntries)
    }
     outupdateRollingTable();
}
    

}
outloadRolling()

    function addRollingEntry() {
         const machineType = document.getElementById("out_roller_machine_type").value;
        const machineryName = document.getElementById("out_machinery_name").value;
        const machineryId = document.getElementById("out_machinery_id").value;
        const operator = document.getElementById("out_roller_machinery_name_operator").value;
        const speed = document.getElementById("out_rolling_speed").value;
        const passes = document.getElementById("out_no_of_passes").value;
        const unit = document.getElementById("out_passes_unit").value;
        const time = document.getElementById("out_time_roller").value;

          if (!machineType || !machineryName || !operator || !speed || !passes || !unit || !time) {
            alert("Please fill all fields before adding.");
            return;
        }

        const entry = {
            machineType,
            machineryId,
            machineryName,
            operator,
            speed,
            passes,
            unit,
            time
        };

        outrollingEntries.push(entry);
        outupdateRollingTable();
    }

    function outupdateRollingTable() {
        const tableBody = document.querySelector("#outrollingTable tbody");
        tableBody.innerHTML = "";

        outrollingEntries.forEach(entry => {
            const row = document.createElement("tr");
            row.innerHTML = `
                <td>${entry.machineType}</td>
                <td>${entry.machineryName}</td>
                <td>${entry.operator}</td>
                <td>${entry.speed}</td>
                <td>${entry.passes}</td>
                <td>${entry.unit}</td>
                <td>${entry.time}</td>
            `;
            tableBody.appendChild(row);
        });

        document.getElementById("out_rolling_entries_json").value = JSON.stringify(outrollingEntries);
    }
</script>

<script>
    let outmoverEntries = [];

    async function outloadMover() {
        alert()
    async function machineNameOutMover(params) {
       return await getMachineryNameOut(params)
    }
     async function getMachineryNameOut(id) 
     {
        try {
        const response = await axios.get("/usr_admin/machinery/" + id);
        return response.data.machinery.print_details;
    } catch (e) {
        console.log(e);
        return "Unknown";
    }
     }
   
     function getSplit(val)
    {
        return val.split("__####__").filter(e => e.trim() !== "");
    }
   
         
const machineryId=getSplit("{{daily.31}}")
const unit=getSplit("{{daily.99}}")
const time=getSplit("{{daily.33}}")
const type=getSplit("{{daily.97}}")
const operator=getSplit("{{daily.98}}")
const date=getSplit("{{daily.32}}")
const mowHeight=getSplit("{{daily.34}}")
const duration=getSplit("{{daily.100}}")

const namePromises = machineryId.map(id => machineNameOutMover(id));
    const names = await Promise.all(namePromises);


if(machineryId.length>0)
{
    for(let i=0;i<machineryId.length;i++)
{
 const entry = {
            type:type[i],
            machineryId:machineryId[i],
            machineryName:names[i],
            operator:operator[i],
           duration:duration[i],
           
            unit:unit[i],
            time:time[i],
            mowHeight:mowHeight[i],
            date:date[i]


          
        };
// const machineryName=getSplit("{{daily.72}}")
console.log(entry)
outmoverEntries.push(entry);
console.log(outmoverEntries)
}
outupdateMoverTable();
}
    

}
outloadMover()

    

    function outaddMoverEntry() {
        const type = document.getElementById("out_mover_machine_type").value;
        const machineryName = document.getElementById("out_mover_machinery_name").value;
        const machineryId = document.getElementById("out_mover_machinery_id").value;
        const operator = document.getElementById("out_mover_machinery_name_operator").value;
        const mowHeight = document.getElementById("out_mowing_done_at_mm").value;
        const unit = document.getElementById("out_moving_passes_unit").value;
        const duration = document.getElementById("out_mowing_duration").value;
        const time = document.getElementById("out_time_of_application_mover").value;
        const date = document.getElementById("out_date_mowing_done_last").value;

        if (!type || !machineryName || !operator || !unit || !duration || !time || !date || !mowHeight) {
            alert("Please fill all fields before adding.");
            return;
        }

        const entry = {
            type,
            machineryId,
            machineryName,
            operator,
            mowHeight,
            unit,
            duration,
            time,
            date
        };

        outmoverEntries.push(entry);
        outupdateMoverTable();
    }

    function outupdateMoverTable() {
        const tbody = document.querySelector("#outmoverTable tbody");
        tbody.innerHTML = "";

        outmoverEntries.forEach(e => {
            tbody.innerHTML += `
                <tr>
                    <td>${e.type}</td>
                    <td>${e.machineryName}</td>
                    <td>${e.operator}</td>
                    <td>${e.mowHeight}</td>
                    <td>${e.duration}</td>
                    <td>${e.unit}</td>
                    <td>${e.time}</td>
                    <td>${e.date}</td>
                </tr>
            `;
        });

        document.getElementById("out_mover_entries_json").value = JSON.stringify(outmoverEntries);
    }
</script>


<script>
     async function loadOutChemicalData() {
        function getSplit(val) {
            return val.split("__####__").filter(e => e.trim() !== "");
        }

        function toYesNo(val) {
            return val === "1" ? "Yes" : "No";
        }

        const usedList = getSplit("{{ daily.35|default:'' }}").map(toYesNo);       // out_is_fertilizers_used
        const timeList = getSplit("{{ daily.55|default:'' }}");                    // out_time_of_application_chemical
        const chemicalList = getSplit("{{ daily.36|default:'' }}");                // out_fertilizers_details
        const weightList = getSplit("{{ daily.83|default:'' }}");                  // out_chemical_weight
        const unitList = getSplit("{{ daily.87|default:'' }}");                    // out_chemical_unit
        const remarkList = getSplit("{{ daily.37|default:'' }}");                  // out_chemical_details_remark

        const tableBody = document.querySelector("#outchemicalTable tbody");
        tableBody.innerHTML = "";

        for (let i = 0; i < chemicalList.length; i++) {
            const row = document.createElement("tr");
            row.innerHTML = `
                <td>${usedList[i] || ''}</td>
                <td>${timeList[i] || ''}</td>
                <td>${chemicalList[i] || ''}</td>
                <td>${weightList[i] || ''}</td>
                <td>${unitList[i] || ''}</td>
                <td>${remarkList[i] || ''}</td>
                <td><button type="button" class="btn btn-sm btn-danger delete-row">X</button></td>
            `;
            tableBody.appendChild(row);
        }

        updateOutChemicalData();  // Update the hidden input
    }

    document.addEventListener("DOMContentLoaded", loadOutChemicalData);

                                                    document.getElementById("outaddChemicalBtn").addEventListener("click", function () {
                                                        const used = document.getElementById("out_is_fertilizers_used").checked ? "Yes" : "No";
                                                        const time = document.getElementById("out_time_of_application_chemical").value;
                                                        const chemical = document.getElementById("out_fertilizers_details").selectedOptions[0].text;
                                                        const weight = document.getElementById("out_chemical_weight").value;
                                                        const unit = document.getElementById("out_fertilizers_unit").value;
                                                        const remark = document.getElementById("out_chemical_details_remark").value;

                                                        // if (!chemical || !time) {
                                                        //   alert("Please fill required fields: Chemical and Time.");
                                                        //   return;
                                                        // }

                                                        const tableBody = document.querySelector("#outchemicalTable tbody");
                                                        const row = document.createElement("tr");

                                                        row.innerHTML = `<td>${used}</td>
<td>${time}</td>
<td>${chemical}</td>
<td>${weight}</td>
<td>${unit}</td>
<td>${remark}</td>
<td><button type="button" class="btn btn-sm btn-danger delete-row">X</button></td>
`;
                                                        tableBody.appendChild(row);

                                                        // Reset inputs
                                                        // document.getElementById("time_of_application_chemical").value = "";
                                                        // document.getElementById("fertilizers_details").value = "";
                                                        // document.getElementById("chemical_weight").value = "";
                                                        // document.getElementById("fertilizers_unit").value = "";
                                                        // document.getElementById("chemical_details_remark").value = "";

                                                        updateOutChemicalData();
                                                    });

                                                    document.querySelector("#outchemicalTable").addEventListener("click", function (e) {
                                                        if (e.target.classList.contains("delete-row")) {
                                                            e.target.closest("tr").remove();
                                                            updateOutChemicalData();
                                                        }
                                                    });

                                                    function updateOutChemicalData() {
                                                        const rows = document.querySelectorAll("#outchemicalTable tbody tr");
                                                        const data = Array.from(rows).map(row => {
                                                            const cells = row.querySelectorAll("td");
                                                            return {
                                                                out_is_fertilizers_used: cells[0].innerText,
                                                                out_time_of_application_chemical: cells[1].innerText,
                                                                out_fertilizers_details: cells[2].innerText,
                                                                out_chemical_weight: cells[3].innerText,
                                                                out_chemical_unit: cells[4].innerText,
                                                                out_chemical_details_remark: cells[5].innerText
                                                            };
                                                        });
                                                        console.log(data)
                                                        document.getElementById("out_chemical_entries").value = JSON.stringify(data);
                                                    }

                                                    // Final form submit validation (optional)
                                                    function handleSubmit(form) {
                                                        const hiddenField = document.getElementById("out_chemical_entries").value;
                                                        if (!hiddenField || hiddenField === "[]") {
                                                            alert("Please add at least one chemical entry.");
                                                            return false;
                                                        }
                                                        return true;
                                                    }
</script>

<!-- practice area -->

<script>
    let practicerollingEntries = [];

    async function practiceloadRolling() {
        function getSplit(val) {
            return val.split("__####__").filter(e => e.trim() !== "");
        }

        async function getMachineryName(id) {
            try {
                const response = await fetch("/usr_admin/machinery/" + id);
                if (!response.ok) throw new Error("Fetch failed");
                const data = await response.json();
                return data.machinery.print_details;
            } catch (e) {
                console.error(e);
                return "Unknown";
            }
        }

        const machineType = getSplit("{{ daily.111|default:'' }}");  // practice_roller_machine_type
        const operator = getSplit("{{ daily.112|default:'' }}");     // practice_roller_machinery_name_operator
        const speed = getSplit("{{ daily.41|default:'' }}");         // practice_rolling_speed
        const passes = getSplit("{{ daily.40|default:'' }}");        // practice_no_of_passes
        const unit = getSplit("{{ daily.116|default:'' }}");         // practice_passes_unit
        const time = getSplit("{{ daily.45|default:'' }}");          // practice_time_roller
        const machineryId = getSplit("{{ daily.39|default:'' }}");   // practice_machinery_id

        const namePromises = machineryId.map(id => getMachineryName(id));
        const machineryNames = await Promise.all(namePromises);

        for (let i = 0; i < machineryId.length; i++) {
            const entry = {
                machineType: machineType[i],
                machineryId: machineryId[i],
                machineryName: machineryNames[i],
                operator: operator[i],
                speed: speed[i],
                passes: passes[i],
                unit: unit[i],
                time: time[i]
            };
            practicerollingEntries.push(entry);
        }

        practiceupdateRollingTable();
    }

    document.addEventListener("DOMContentLoaded", practiceloadRolling);

    function practiceaddRollingEntry() {
        const machineType = document.getElementById("practice_roller_machine_type").value;
        const machineryName = document.getElementById("practice_machinery_name").value;
        const machineryId = document.getElementById("practice_machinery_id").value;
        const operator = document.getElementById("practice_roller_machinery_name_operator").value;
        const speed = document.getElementById("practice_rolling_speed").value;
        const passes = document.getElementById("practice_no_of_passes").value;
        const unit = document.getElementById("practice_passes_unit").value;
        const time = document.getElementById("practice_time_roller").value;

        if (!machineType || !machineryName || !operator || !speed || !passes || !unit || !time) {
            alert("Please fill all fields before adding.");
            return;
        }

        const entry = {
            machineType,
            machineryId,
            machineryName,
            operator,
            speed,
            passes,
            unit,
            time
        };

        practicerollingEntries.push(entry);
        practiceupdateRollingTable();
    }

    function practiceupdateRollingTable() {
        const tableBody = document.querySelector("#practicerollingTable tbody");
        tableBody.innerHTML = "";

        practicerollingEntries.forEach(entry => {
            const row = document.createElement("tr");
            row.innerHTML = `
                <td>${entry.machineType}</td>
                <td>${entry.machineryName}</td>
                <td>${entry.operator}</td>
                <td>${entry.speed}</td>
                <td>${entry.passes}</td>
                <td>${entry.unit}</td>
                <td>${entry.time}</td>
            `;
            tableBody.appendChild(row);
        });

        document.getElementById("practice_rolling_entries_json").value = JSON.stringify(practicerollingEntries);
    }
</script>

<script>
    let practicemoverEntries = [];
 async function practiceloadMover() {
        function getSplit(val) {
            return val.split("__####__").filter(e => e.trim() !== "");
        }

        async function getMachineryName(id) {
            try {
                const response = await fetch("/usr_admin/machinery/" + id);
                if (!response.ok) throw new Error("Fetch failed");
                const data = await response.json();
                return data.machinery.print_details;
            } catch (e) {
                console.error(e);
                return "Unknown";
            }
        }

        const type = getSplit("{{ daily.94|default:'' }}");              // practice_mover_machine_type
        const operator = getSplit("{{ daily.95|default:'' }}");          // practice_mover_machinery_name_operator
        const mowHeight = getSplit("{{ daily.50|default:'' }}");         // practice_mowing_done_at_mm
        const unit = getSplit("{{ daily.96|default:'' }}");              // practice_moving_passes_unit
        const duration = getSplit("{{ daily.97|default:'' }}");          // practice_mowing_duration
        const time = getSplit("{{ daily.49|default:'' }}");              // practice_time_of_application_mover
        const date = getSplit("{{ daily.48|default:'' }}");              // practice_date_mowing_done_last
        const machineryId = getSplit("{{ daily.47|default:'' }}");       // practice_mover_machinery_id

        const namePromises = machineryId.map(id => getMachineryName(id));
        const machineryNames = await Promise.all(namePromises);

        for (let i = 0; i < machineryId.length; i++) {
            const entry = {
                type: type[i],
                machineryId: machineryId[i],
                machineryName: machineryNames[i],
                operator: operator[i],
                mowHeight: mowHeight[i],
                unit: unit[i],
                duration: duration[i],
                time: time[i],
                date: date[i]
            };
            practicemoverEntries.push(entry);
        }

        practiceupdateMoverTable();
    }

    document.addEventListener("DOMContentLoaded", practiceloadMover);
    function practiceaddMoverEntry() {
        const type = document.getElementById("practice_mover_machine_type").value;
        const machineryName = document.getElementById("practice_mover_machinery_name").value;
        const machineryId = document.getElementById("practice_mover_machinery_id").value;
        const operator = document.getElementById("practice_mover_machinery_name_operator").value;
        const mowHeight = document.getElementById("practice_mowing_done_at_mm").value;
        const unit = document.getElementById("practice_moving_passes_unit").value;
        const duration = document.getElementById("practice_mowing_duration").value;
        const time = document.getElementById("practice_time_of_application_mover").value;
        const date = document.getElementById("practice_date_mowing_done_last").value;

        if (!type || !machineryName || !operator || !unit || !duration || !time || !date || !mowHeight) {
            alert("Please fill all fields before adding.");
            return;
        }

        const entry = {
            type,
            machineryId,
            machineryName,
            operator,
            mowHeight,
            unit,
            duration,
            time,
            date
        };

        practicemoverEntries.push(entry);
        practiceupdateMoverTable();
    }

    function practiceupdateMoverTable() {
        const tbody = document.querySelector("#practicemoverTable tbody");
        tbody.innerHTML = "";

        practicemoverEntries.forEach(e => {
            tbody.innerHTML += `
                <tr>
                    <td>${e.type}</td>
                    <td>${e.machineryName}</td>
                    <td>${e.operator}</td>
                    <td>${e.mowHeight}</td>
                    <td>${e.duration}</td>
                    <td>${e.unit}</td>
                    <td>${e.time}</td>
                    <td>${e.date}</td>
                </tr>
            `;
        });

        document.getElementById("practice_mover_entries_json").value = JSON.stringify(practicemoverEntries);
    }
</script>

<script>
     async function loadPracticeChemicalData() {
        function getSplit(val) {
            return val.split("__####__").filter(e => e.trim() !== "");
        }

        // Convert 1/0 to Yes/No
        function convertToYesNo(val) {
            return val === "1" ? "Yes" : "No";
        }

        const usedList = getSplit("{{ daily.51|default:'' }}").map(convertToYesNo);         // practice_is_fertilizers_used
        const timeList = getSplit("{{ daily.56|default:'' }}");                             // practice_time_of_application_chemical
        const chemicalList = getSplit("{{ daily.52|default:'' }}");                         // practice_fertilizers_details
        const weightList = getSplit("{{ daily.83|default:'' }}");                           // practice_chemical_weight
        const unitList = getSplit("{{ daily.87|default:'' }}");                             // practice_chemical_unit
        const remarkList = getSplit("{{ daily.53|default:'' }}");                           // practice_chemical_details_remark

        const tableBody = document.querySelector("#practiceChemicalTable tbody");
        tableBody.innerHTML = "";

        for (let i = 0; i < chemicalList.length; i++) {
            const row = document.createElement("tr");
            row.innerHTML = `
                <td>${usedList[i] || ''}</td>
                <td>${timeList[i] || ''}</td>
                <td>${chemicalList[i] || ''}</td>
                <td>${weightList[i] || ''}</td>
                <td>${unitList[i] || ''}</td>
                <td>${remarkList[i] || ''}</td>
                <td><button type="button" class="btn btn-sm btn-danger delete-row">X</button></td>
            `;
            tableBody.appendChild(row);
        }

        practicUpdateChemicalData();  // Update hidden input
    }

    document.addEventListener("DOMContentLoaded", loadPracticeChemicalData);
                                            document.getElementById("practiceAddChemicalBtn").addEventListener("click", function () {
                                                const used = document.getElementById("practice_is_fertilizers_used").checked ? "Yes" : "No";
                                                const time = document.getElementById("practice_time_of_application_chemical").value;
                                                const chemical = document.getElementById("practice_fertilizers_details").selectedOptions[0].text;
                                                const weight = document.getElementById("practice_chemical_weight").value;
                                                const unit = document.getElementById("practice_fertilizers_unit").value;
                                                const remark = document.getElementById("practice_chemical_details_remark").value;

                                                // if (!chemical || !time) {
                                                //   alert("Please fill required fields: Chemical and Time.");
                                                //   return;
                                                // }

                                                const tableBody = document.querySelector("#practiceChemicalTable tbody");
                                                const row = document.createElement("tr");

                                                row.innerHTML = `<td>${used}</td>
<td>${time}</td>
<td>${chemical}</td>
<td>${weight}</td>
<td>${unit}</td>
<td>${remark}</td>
<td><button type="button" class="btn btn-sm btn-danger delete-row">X</button></td>
`;
                                                tableBody.appendChild(row);

                                                // Reset inputs
                                                // document.getElementById("time_of_application_chemical").value = "";
                                                // document.getElementById("fertilizers_details").value = "";
                                                // document.getElementById("chemical_weight").value = "";
                                                // document.getElementById("fertilizers_unit").value = "";
                                                // document.getElementById("chemical_details_remark").value = "";

                                                practicUpdateChemicalData();
                                            });

                                            document.querySelector("#practiceChemicalTable").addEventListener("click", function (e) {
                                                if (e.target.classList.contains("delete-row")) {
                                                    e.target.closest("tr").remove();
                                                    practicUpdateChemicalData();
                                                }
                                            });

                                            function practicUpdateChemicalData() {
                                                const rows = document.querySelectorAll("#practiceChemicalTable tbody tr");
                                                const data = Array.from(rows).map(row => {
                                                    const cells = row.querySelectorAll("td");
                                                    return {
                                                        practice_is_fertilizers_used: cells[0].innerText,
                                                        practice_time_of_application_chemical: cells[1].innerText,
                                                        practice_fertilizers_details: cells[2].innerText,
                                                        practice_chemical_weight: cells[3].innerText,
                                                        practice_chemical_unit: cells[4].innerText,
                                                        practice_chemical_details_remark: cells[5].innerText
                                                    };
                                                });
                                                document.getElementById("practice_chemical_entries").value = JSON.stringify(data);
                                            }

                                            // Final form submit validation (optional)
                                            function handleSubmit(form) {
                                                const hiddenField = document.getElementById("practice_chemical_entries").value;
                                                if (!hiddenField || hiddenField === "[]") {
                                                    alert("Please add at least one chemical entry.");
                                                    return false;
                                                }
                                                return true;
                                            }
</script>

        </html>